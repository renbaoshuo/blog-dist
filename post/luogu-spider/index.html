<!DOCTYPE html><html lang="zh-CN"><head><meta name="viewport" content="width=device-width"><meta charset="utf-8"><link rel="alternate" type="application/atom+xml" href="/atom.xml" title="宝硕博客"><meta property="og:site_name" content="宝硕博客"><meta property="og:image" content="https://cdn.jsdelivr.net/npm/bsi@0.0.6/favicon/256x256.png"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@renbaoshuo"><meta name="twitter:creator" content="@renbaoshuo"><title>洛谷爬虫 - 宝硕博客</title><meta name="description" content="截至目前，洛谷已经有了近两万道题目和四十余万名用户。本代码爬取了一些样本，以供后续（可能）的数据分析。"><meta property="og:description" content="截至目前，洛谷已经有了近两万道题目和四十余万名用户。本代码爬取了一些样本，以供后续（可能）的数据分析。"><meta name="keywords" content=""><meta property="og:type" content="article"><meta property="og:title" content="洛谷爬虫 - 宝硕博客"><meta property="og:url" content="/post/luogu-spider/"><link rel="canonical" href="/post/luogu-spider/"><meta name="next-head-count" content="16"><meta name="darkreader" content="disabled"><meta name="generator" content="Hexo 6.2.0"><script defer="" src="https://cdnjs.baoshuo.ren/ajax/libs/react/18.2.0/umd/react.production.min.js" crossorigin=""></script><script defer="" src="https://cdnjs.baoshuo.ren/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js" crossorigin=""></script><script defer="" nomodule="" src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/webpack-d03dec103c5ee603.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/framework-c179c9a670c47eb6.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/main-d001dfc4b5cb68c2.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/pages/_app-8df0f06cff2cbf6b.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/6-edd26cc39383d1b0.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/pages/post/%5Bslug%5D-8e6125cf83ab44ce.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/xPJp9HILMjfmWDWxtg29J/_buildManifest.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/xPJp9HILMjfmWDWxtg29J/_ssgManifest.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/xPJp9HILMjfmWDWxtg29J/_middlewareManifest.js" defer=""></script><style>.eDssNQ{pointer-events:none}.gZmUMJ{height:2px}.hJfaYF{z-index:200}.dJcTkO{box-shadow:0 0 10px var(--c-a),0 0 10px var(--c-a)}.gOeSjL{opacity:1}.fxkyut{transition:all .25s ease-in-out}.kaWzRu{transform:rotate(3deg) translateY(-4px)}.ktTKqx{width:5%}.cdfZWI:before{box-shadow:inset 0 0 32px}.zJreD:before{height:3px}.iSSyDr:before{left:1.5px}.jORRks:before{top:14px}.beaHbQ:before{width:3px}.haKUHj:after{box-sizing:border-box}.feNfPp:after{transform:translate(-50%,-50%)}.qMJeO:after{box-shadow:inset 0 0 0 2px,0 0 0 2px}.dUAgBC:after{height:27.5px}.hVfwnH:after{left:0}.jtnuen:after{top:100%}.iibzBM:after{width:27.5px}.bLLutt:before{height:.8em}.kUNXjX:before{transform:translate(0) rotate(45deg)}.kBZpXt:before{width:.8em}.kCTVgr:after{top:80%}.cDbGzW:after{left:80%}.eHPmEw:after{transform:translate(-50%,-50%) rotate(45deg)}.dmfenB:after{width:.5em}.kAVdUc{font-size:16px}.jLmWnd:before{height:100%}.jYPXoJ:before{top:0}.kKTZiz:before{left:0}.elJZFC:after{height:14px}.eLXBUo:after{width:7px}.ebtDcN:after{top:1px}.caItCN{height:2rem}.jYEAGD{align-items:stretch}.gKQCBv:after{content:"·"}.jbBqfU:before{transform:translate(-50%,-25%) rotate(45deg)}.dhOkuk:before{box-sizing:border-box}.jFCJJY:before{box-shadow:0 -.35em,0 .35em}.iqzSxf:before{transform:translate(-50%,-50%)}.bQvqKh:before{width:100%}.sKExc{right:1rem}.bjOGUo{bottom:1rem}.eSaSrN{contain:layout}.egGyMq{line-height:1}.IVbXa{justify-content:center}.bcjLCN{flex-grow:0}.WhAZY{top:0}.gdPTUr{height:100%}.dYbGIK{flex-grow:0}.bOjOhu{left:0}.ipEZTh{width:95%}.eRVtDl{max-width:var(--w)}.kKplrA{contain:content}.gifdxR{font-size:1.25rem}.laXLGQ{color:var(--c)}.kooHYa{text-align:center}.moyUB{color:#fff}.eAOGpx{user-select:none}.bLHLvQ{text-indent:-9999px}.jXmXEB{height:1em}.hHGIsI{width:1em}.jbzBdl:before{transform:translate(-25%,-50%) rotate(-45deg)}.fIXfpL:before{width:.65em}.ergVCo:before{height:.65em}.cqyuit:before{top:50%}.hCTuXM:before{left:50%}.gvwkfp{font-size:.9em}.bRNbBj{font-weight:500}.fPWmiY{justify-content:flex-start}.hmKFEM{text-align:left}.dQPgRK{flex-grow:1}.fXzCvR{justify-content:flex-end}.klEWBS{text-align:right}.foGVKH{align-items:center}.fygwnR{box-sizing:border-box}.kQBRAp{display:block}.iMyxuR:after{display:block}.bbRNPO:after{left:1px}.imhmwA{position:fixed}.dPAasc{box-shadow:var(--s)}.jqaXfP{z-index:100}.iVncgA::-webkit-scrollbar{height:var(--s-x)}.fQhDyl::-webkit-scrollbar{width:var(--s-y)}.bBVwIW{letter-spacing:1px}.jsvbrX{cursor:pointer}.kroOag{font-size:.9rem}.bEvNbr{position:absolute}.eLDTYY{vertical-align:middle}.iRjWhb{font-size:.925rem}.QcCvg{height:12.25em}.jdKAzd{width:12.25em}.krZeLX{right:-30px}.gjJDYK{top:-40px}.dZDNG{opacity:.1}.julXB:before{content:""}.kvHVCE:before{position:absolute}.fQfkux:before{height:3.75em}.dPenaT:before{width:3.75em}.NpaJd:before{left:1.5625em}.jgAayQ:before{top:3em}.fqXcHQ:after{content:""}.dyMCpl:after{position:absolute}.chpxwD:after{height:3.75em}.beuMzX:after{width:3.75em}.dbtvqd:after{right:1.5625em}.jPcnDC:after{top:3em}.bpQkXn{font-weight:700}.gcQrEv{font-size:.9em}.iMkoWi{flex-direction:column}.chVqDG{font-size:.8em}.fyuAJJ{color:inherit}.cypeLb{font-size:1.75rem}.VFfNK{letter-spacing:.75px}.dgIPcR{color:var(--c-m)}.cjScYX{position:relative}.cRUUAa{width:100%}.gSBWlu{display:flex}.kJzccJ{justify-content:space-between}.cpOcAb{display:inline-block}.kpaoc{color:var(--c-s)}.kOZsAO{word-break:keep-all}.jBtqwC{background-color:var(--c-a)}.cTiRpf:after{border-top-left-radius:100px}.kLOwRz:after{border-top-right-radius:100px}.fEOdlm:after{border-bottom-right-radius:100px}.iiCJgG:after{border-bottom-left-radius:100px}.gbJvTx:before{border-top-left-radius:100px}.eqcbDJ:before{border-top-right-radius:100px}.efWRhG:before{border-bottom-right-radius:100px}.ciQIPM:before{border-bottom-left-radius:100px}.jVKJhP:before{border-top-left-radius:1000px}.qOQRo:before{border-top-right-radius:1000px}.ftrJDm:before{border-bottom-right-radius:1000px}.dnkCBy:before{border-bottom-left-radius:1000px}.eCTYLu:after{overflow-x:hidden}.fPEpYf:after{overflow-y:hidden}.fSuxSX:after{border-top-left-radius:1000px}.diZuuN:after{border-bottom-left-radius:1000px}.ihNVbP{flex-basis:0}.KqcXP{background-color:transparent}.eIJBjz{padding-right:.7rem}.hcJOFn{padding-left:.7rem}.iawFZL{margin-right:.4rem}.kswRdL{margin-left:.4rem}.eGElBa{padding-top:2.5rem}.eBrwtd{padding-bottom:4rem}.edKxdA{padding-top:.9rem}.osxXp{padding-right:.9rem}.foquGP{padding-bottom:.9rem}.lhTVEC{padding-left:.9rem}.eQmaZO{padding-top:.6rem}.dZrGlq{padding-bottom:.6rem}.gCwvuy{background-color:var(--g-m)}.dvivnl{overflow-x:auto}.jSOKOm{text-decoration-line:inherit}.bKjKUN{padding-top:.75rem}.jdraHW{margin-right:auto}.eqrBPF{margin-left:auto}.lexxaO{background-color:#946ce6}.ebVilo{border-top-left-radius:.25rem}.kyhYEz{border-top-right-radius:.25rem}.jIkFRm{border-bottom-right-radius:.25rem}.gpptow{border-bottom-left-radius:.25rem}.kMKXDC{padding-top:.25rem}.ftIldC{padding-right:1rem}.jOeduE{padding-bottom:.25rem}.iDuqPI{padding-left:1rem}.kUPESX{margin-left:.5rem}.eKlQYW{flex-shrink:1}.bLlOeF{flex-basis:50%}.hwgZgR:after{background-color:currentColor}.bcfNhz{background-color:var(--g-b)}.kRQsoY{border-top-left-radius:var(--r)}.jBvrhX{border-top-right-radius:var(--r)}.dgtTIu{border-bottom-right-radius:var(--r)}.eXJtsk{border-bottom-left-radius:var(--r)}.llUCyD{overflow-y:auto}.qlVwF::-webkit-scrollbar-thumb{background-color:#b5b5b5}.jOHNtp::-webkit-scrollbar-thumb{border-top-left-radius:var(--r)}.PvULj::-webkit-scrollbar-thumb{border-top-right-radius:var(--r)}.hTxdYE::-webkit-scrollbar-thumb{border-bottom-right-radius:var(--r)}.fUqTQL::-webkit-scrollbar-thumb{border-bottom-left-radius:var(--r)}.kVZHcH{padding-top:0}.cyerGB{margin-top:.5rem}.dSxtaa{margin-right:.5rem}.ctWdVF{border-top-left-radius:50%}.jkGfDR{border-top-right-radius:50%}.bSTogt{border-bottom-right-radius:50%}.hSDpeY{border-bottom-left-radius:50%}.cDxIqC:before{border-top-left-radius:50%}.jpWidM:before{border-top-right-radius:50%}.jzdNVF:before{border-bottom-right-radius:50%}.bPkdhG:before{border-bottom-left-radius:50%}.beJoMJ:after{border-top-left-radius:50%}.iJgiCW:after{border-top-right-radius:50%}.hqUHPA:after{border-bottom-right-radius:50%}.jWWlrr:after{border-bottom-left-radius:50%}.jnGacs{background-color:var(--g-l)}.cvPkWa{padding-bottom:1.25rem}.dUvWpK{overflow-x:hidden}.hRLVFh{overflow-y:hidden}.dLUwcr{text-decoration-line:underline}.kiDYix{flex-wrap:wrap}.hriXhD{flex-shrink:0}.jjryqL{margin-right:1rem}.jTjNVR{margin-top:0}.hNjeNG{margin-bottom:0}.kpCrIt{padding-top:1.25rem}.bMSzLf{padding-right:2rem}.iATxZH{padding-bottom:0}.iigETV{padding-left:2rem}.fClzDx{margin-top:.75rem}.iKck{margin-right:0}.hlBtvm{margin-bottom:.75rem}.bmFLeF{margin-left:0}.dwawJR{padding-right:0}.jQenOz{padding-left:0}.icKiSN{padding-top:1.5rem}.fZMRmg{padding-bottom:1.5rem}.cUXNmd{margin-top:1rem}.biWxPv{margin-bottom:1rem}.bbUXPo{text-decoration-line:none}.dmKgnC{padding-top:.5rem}.cVJMrm{padding-right:.5rem}.dPFrWx{padding-bottom:.5rem}.JxWnH{padding-left:.5rem}.dAseSU:after{border-top-width:4px}.gFfWNi:after{border-right-width:4px}.hQijyr:after{border-bottom-width:4px}.cKXpgz:after{border-left-width:4px}.jxivWg:after{border-top-color:transparent}.eoMfVT:after{border-bottom-color:transparent}.iOXMHb:after{border-left-color:transparent}.dbfKrc:after{border-top-width:2px}.jAobFs{border-top-style:none}.dQbyJV{border-right-style:none}.oTbqa{border-bottom-style:none}.gwsGKP{border-left-style:none}.SeaTL:before{border-top-width:2px}.gjJuRC:before{border-right-width:0}.iWYpgm:before{border-bottom-width:0}.iHkzF:before{border-left-width:2px}.gUiFRX:before{border-top-width:0}.dixaxG:before{border-right-width:2px}.jmWgOv:before{border-bottom-width:2px}.bTanCN:before{border-left-width:0}.gMDOZu{border-top-width:1.125em}.cgEEZJ{border-right-width:1.125em}.gqWyNB{border-bottom-width:1.125em}.ktfQGr{border-left-width:1.125em}.lpnDDz:before{border-top-width:1em}.ebRqqn:before{border-right-width:1em}.bWKMJW:before{border-bottom-width:1em}.eQlDDM:before{border-left-width:1em}.kSnqYR:before{border-top-style:solid}.fgiDpI:before{border-right-style:solid}.eeAUEW:before{border-bottom-style:solid}.ecjlX:before{border-left-style:solid}.bnSwfb:before{border-right-color:transparent}.jMYtKl:after{border-top-width:1em}.blQfIT:after{border-right-width:1em}.lijgUQ:after{border-bottom-width:1em}.ccSWYO:after{border-left-width:1em}.eGyfkC:after{border-top-style:solid}.hhBXzE:after{border-right-style:solid}.iyXZtO:after{border-bottom-style:solid}.jZLyOQ:after{border-left-style:solid}.hZGkn:after{border-right-color:transparent}.FwRrA{border-top-style:solid}.cDIyHz{border-right-style:solid}.hpBjJb{border-bottom-style:solid}.ycSPk{border-left-style:solid}@media (min-width:769px){.dXUryZ{padding-top:0}.dGtUgz{padding-right:1rem}.cQUTzq{padding-bottom:0}.bjXFvo{padding-left:1rem}.jzScEz{padding-top:2.5rem}.hMoAFf{padding-right:3rem}.bccxkr{padding-bottom:4rem}.cgjdEA{padding-left:3rem}.jZOgvY{display:flex}.uUxpw{justify-content:space-between}}@media (max-width:768px){.cElyNr{flex-direction:column}.gwFLA_D{align-items:center}}.cdhcuu:hover{color:var(--c-a)}.fItHnb:hover{background-color:var(--g-n)}*,:after,:before{box-sizing:border-box}html{-moz-tab-size:4;-o-tab-size:4;tab-size:4;line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}code,pre{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}button{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button{text-transform:none}button{-webkit-appearance:button}:root{--g:#f2f5f8;--g-m:#fff;--g-b:#fff;--g-s:#f6f7f8;--g-p:#f6f8fa;--g-c:rgba(174,184,193,.2);--g-n:rgba(67,90,111,.06);--g-t:#fff;--g-l:#f5f5f5;--g-i:#fff;--g-r:hsla(200,5%,89%,.5);--c:#2f3d4e;--c-a:#0969da;--c-s:#57606a;--c-m:#6f767d;--h6:#57606b;--b:#d8dee4;--b-t:#d0d7de;--r:0.5rem;--s-y:0.5rem;--s-x:0.35rem;--w:1000px;--s:0 4px 10px rgba(0,2,4,.06),0 0 1px rgba(0,2,4,.11);--i:0}@media(max-width:768px){:root{--s-y:0.35rem;--s-x:0.28rem}}@media(prefers-color-scheme:dark){:root:not(.light){color-scheme:dark;--g:#121212;--g-m:#21262d;--g-b:#364151;--g-s:#2f3542;--g-p:#161b22;--g-c:hsla(215,8%,47%,.4);--g-n:#3e4b5e;--g-t:#2f3542;--g-l:#2c343c;--g-i:#3b3b3b;--g-r:rgba(51,61,77,.5);--c:#c9d1d9;--c-a:#58a6ff;--c-s:#8b949e;--c-m:hsla(0,0%,100%,.659);--h6:#8b949e;--b:#757575;--b-t:#5f5f5f;--s:none;--i:1}:root:not(.light) img{filter:brightness(.8)}}body{line-height:1.5;background:var(--g);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,PingFang SC,Hiragino Sans GB,Source Han Sans SC,Noto Sans CJK SC,Microsoft YaHei,WenQuanYi Micro Hei,WenQuanYi Zen Hei,Helvetica Neue,Arial,sans-serif;color:var(--c);overflow-y:scroll}#__next{display:flex;flex-direction:column;justify-content:space-between;min-height:100vh}*{transition:background-color .25s ease-in-out}a{color:var(--c-a);text-decoration:none}#post_markdown__nRdJ1{line-height:1.5;word-wrap:break-word}#post_markdown__nRdJ1>:first-child{margin-top:0!important}#post_markdown__nRdJ1>:last-child{margin-bottom:0!important}#post_markdown__nRdJ1 a{color:var(--c-a);-webkit-text-decoration:underline transparent;text-decoration:underline transparent;text-underline-position:under;transition:-webkit-text-decoration-color 75ms ease-in-out;transition:text-decoration-color 75ms ease-in-out;transition:text-decoration-color 75ms ease-in-out,-webkit-text-decoration-color 75ms ease-in-out}#post_markdown__nRdJ1 a:active,#post_markdown__nRdJ1 a:hover{outline-width:0}#post_markdown__nRdJ1 a:hover{-webkit-text-decoration:underline var(--c-a);text-decoration:underline var(--c-a)}#post_markdown__nRdJ1 img{border-style:none;max-width:100%;box-sizing:content-box}#post_markdown__nRdJ1 h2,#post_markdown__nRdJ1 h3{margin-top:1.5rem;margin-bottom:1rem;font-weight:700;line-height:1.25}#post_markdown__nRdJ1 h2{font-size:1.5em}#post_markdown__nRdJ1 h3{font-size:1.25em}#post_markdown__nRdJ1 p{margin-top:0;margin-bottom:.625rem}#post_markdown__nRdJ1 code{font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:.75em;margin:0;padding:.2em .4em;background-color:var(--g-c);border-radius:6px}#post_markdown__nRdJ1 pre{padding:1rem;overflow:auto;font-size:.85em;line-height:1.45;background-color:var(--g-p);border-radius:6px;word-wrap:normal}#post_markdown__nRdJ1 pre::-webkit-scrollbar{height:var(--s-x);width:var(--s-y)}#post_markdown__nRdJ1 pre::-webkit-scrollbar-thumb{background:#b5b5b5;border-radius:var(--r)}#post_markdown__nRdJ1 pre code{font-size:100%;display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background:transparent;border:0}#post_markdown__nRdJ1 p,#post_markdown__nRdJ1 pre{margin-top:0;margin-bottom:1rem}#post_markdown__nRdJ1 .hljs-keyword{color:#d73a49}#post_markdown__nRdJ1 .hljs-title,#post_markdown__nRdJ1 .hljs-title.function_{color:#6f42c1}#post_markdown__nRdJ1 .hljs-attribute,#post_markdown__nRdJ1 .hljs-literal,#post_markdown__nRdJ1 .hljs-meta,#post_markdown__nRdJ1 .hljs-number{color:#005cc5}#post_markdown__nRdJ1 .hljs-string{color:#032f62}#post_markdown__nRdJ1 .hljs-built_in{color:#e36209}#post_markdown__nRdJ1 .hljs-comment{color:#6a737d}#post_markdown__nRdJ1 .hljs-subst{color:#24292e}#post_markdown__nRdJ1 .hljs-addition{color:#22863a;background-color:#f0fff4}#post_markdown__nRdJ1 .hljs-deletion{color:#b31d28;background-color:#ffeef0}</style><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/3fc16492cd6995f6.css" data-n-g="" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/3fc16492cd6995f6.css"></noscript><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/1550b18fa9b2cc2d.css" data-n-g="" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/1550b18fa9b2cc2d.css"></noscript><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/49e3c9be9aebdd02.css" data-n-p="" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/49e3c9be9aebdd02.css"></noscript><noscript data-n-css=""></noscript></head><body><div id="__next"><div class="eDssNQ imhmwA bOjOhu WhAZY cRUUAa gZmUMJ hJfaYF KqcXP "><div class="gdPTUr jBtqwC fxkyut " style="opacity:0;width:0%"><div class="bEvNbr ktTKqx gdPTUr fxkyut dJcTkO gOeSjL kaWzRu " style="left:-5.5%"></div></div></div><div><nav class="gSBWlu kJzccJ gCwvuy eAOGpx dPAasc eSaSrN cjScYX jqaXfP cElyNr gwFLA_D dXUryZ dGtUgz cQUTzq bjXFvo " role="navigation"><a class="gSBWlu bcjLCN hriXhD foGVKH gifdxR bpQkXn fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn bBVwIW " href="/"><svg id="Main" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="caItCN dSxtaa "><path d="M471,256A214.8122,214.8122,0,0,1,256,471a216.4337,216.4337,0,0,1-40.955-3.896A214.86,214.86,0,0,1,41,256,214.9809,214.9809,0,0,1,256,41a214.4584,214.4584,0,0,1,154.4137,65.4129q6.911,7.1214,13.146,14.8661c1.3337,1.6587,2.6413,3.3258,3.9229,5.0281A214.5854,214.5854,0,0,1,471,256Z" fill="#5897d1"></path><path d="M419.2572,204.2572A163.1145,163.1145,0,0,1,256,367.5136a164.3664,164.3664,0,0,1-31.0985-2.9579A163.271,163.271,0,1,1,419.2572,204.2572Z" fill="#9fc5e6"></path><path d="M418.8558,63.0971v44.65A10.5833,10.5833,0,0,1,408.2729,118.33H333.7074V52.5134h74.5655A10.584,10.584,0,0,1,418.8558,63.0971Z" fill="#ff668c"></path><path d="M329.7492,458.0118A215.2574,215.2574,0,0,1,60.2534,345.0537l67.6679-90.0019a30.79,30.79,0,0,1,49.2216,0l38.5328,51.2574Z" fill="#343a6e"></path><path d="M408.6937,77.1989a8.2229,8.2229,0,0,1-8.2229,8.223H371.8716a8.2271,8.2271,0,0,0,0,16.4542h9.8724a8.2271,8.2271,0,1,1,0,16.4542H333.7065V52.5134h46.87a8.2238,8.2238,0,0,1,8.2229,8.2313,8.2246,8.2246,0,0,0,8.2313,8.2229h3.44A8.23,8.23,0,0,1,408.6937,77.1989Z" fill="#ef487d"></path><path d="M328.6658,41.0008h0a7.2391,7.2391,0,0,0-7.2394,7.24V230.2126h14.4789V48.24A7.24,7.24,0,0,0,328.6658,41.0008Z" fill="#f9df73"></path><path d="M454.3619,339.0513q-2.87,6.8317-6.1872,13.4266A215.3468,215.3468,0,0,1,215.045,467.104a214.1378,214.1378,0,0,1-82.1653-34.83L299.2368,211.0171a36.8115,36.8115,0,0,1,58.8571,0Z" fill="#484b7f"></path><path d="M328.67,196.3173c-5.6429,0-11.285,4.8972-15.0584,14.699L215.045,467.104a213.7775,213.7775,0,0,1-82.1653-34.83L299.2461,211.0171A36.578,36.578,0,0,1,328.67,196.3173Z" fill="#343a6e"></path><path d="M448.1747,352.4779A215.3468,215.3468,0,0,1,215.045,467.104a213.4209,213.4209,0,0,1-59.4366-20.9382L264.82,337.7974c-17.0068,44.185,31.1885,55.6372,81.2087,37.2085C391.9237,358.0939,396.8116,340.0692,448.1747,352.4779Z" fill="#343a6e"></path><path d="M215.6766,306.31c-25.6245.886-50.9072,16.0419-67.0884,16.0419-25.0106,0-54.584-22.1845-20.6661-67.2992a30.79,30.79,0,0,1,49.2216,0Z" fill="#484b7f"></path></svg><span>宝硕博客</span></a><div class="gSBWlu jYEAGD dvivnl iVncgA fQhDyl qlVwF jOHNtp PvULj hTxdYE fUqTQL "><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/">首页</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/archives/">归档</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/categories/">分类</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/tags/">标签</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/friends/">友链</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/about/">关于</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/atom.xml"><i class="cpOcAb cjScYX hHGIsI jXmXEB bLHLvQ eLDTYY kAVdUc dUvWpK hRLVFh julXB dhOkuk kvHVCE gbJvTx eqcbDJ efWRhG ciQIPM iqzSxf cdfZWI zJreD iSSyDr jORRks beaHbQ fqXcHQ haKUHj dyMCpl cTiRpf kLOwRz fEOdlm iiCJgG feNfPp dAseSU gFfWNi hQijyr cKXpgz eGyfkC hhBXzE iyXZtO jZLyOQ jxivWg hZGkn eoMfVT iOXMHb qMJeO dUAgBC hVfwnH jtnuen iibzBM "></i></a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/search/"><i class="fygwnR cpOcAb kAVdUc jXmXEB hHGIsI cjScYX bLHLvQ eLDTYY julXB kvHVCE SeaTL dixaxG jmWgOv iHkzF kSnqYR fgiDpI eeAUEW ecjlX gbJvTx eqcbDJ efWRhG ciQIPM bLLutt kKTZiz jYPXoJ kUNXjX kBZpXt fqXcHQ dyMCpl dbfKrc eGyfkC kCTVgr cDbGzW eHPmEw dmfenB "></i></a><div class="dYbGIK eKlQYW ihNVbP "><button class="jsvbrX gdPTUr gSBWlu foGVKH IVbXa eQmaZO eIJBjz dZrGlq hcJOFn jAobFs dQbyJV oTbqa gwsGKP KqcXP fItHnb "><i class="cpOcAb kAVdUc jXmXEB hHGIsI cjScYX bLHLvQ eLDTYY julXB kvHVCE bQvqKh jLmWnd SeaTL dixaxG jmWgOv iHkzF kSnqYR fgiDpI eeAUEW ecjlX jVKJhP qOQRo ftrJDm dnkCBy jYPXoJ kKTZiz fqXcHQ dyMCpl iMyxuR hwgZgR eCTYLu fPEpYf fSuxSX diZuuN elJZFC eLXBUo ebtDcN bbRNPO "></i></button></div></div></nav><main><article class="gCwvuy kRQsoY jBvrhX dgtTIu eXJtsk dvivnl llUCyD dPAasc ipEZTh eRVtDl cUXNmd jdraHW biWxPv eqrBPF"><header class="jTjNVR iKck hNjeNG bmFLeF kpCrIt bMSzLf iATxZH iigETV "><h1 class="fClzDx iKck hlBtvm bmFLeF cypeLb VFfNK ">洛谷爬虫</h1><div class="dmKgnC dwawJR dPFrWx jQenOz dgIPcR "><time datetime="2020-11-26T06:55:02.000Z">2020-11-26</time><span class="jTjNVR iawFZL hNjeNG kswRdL gKQCBv "></span><a class="fyuAJJ bbUXPo cdhcuu " href="/categories/%E6%8A%80%E6%9C%AF%E5%90%91/">技术向</a><span class="jTjNVR iawFZL hNjeNG kswRdL gKQCBv "></span><span>约 1.2 千字</span></div></header><section class="jTjNVR iKck hNjeNG bmFLeF bKjKUN bMSzLf fZMRmg iigETV kKplrA " id="post_markdown__nRdJ1"><p>截至目前，洛谷已经有了近两万道题目和四十余万名用户。本代码爬取了一些样本，以供后续（可能）的数据分析。</p><span id="more"></span><p>本次爬取遵守洛谷的 <code>robots.txt</code> 中的要求，不爬取提交记录页面。为了避免影响洛谷的正常运行，脚本只采用单线程进行爬取。</p><pre><code class="hljs http"><span class="hljs-attribute">User-Agent</span><span class="hljs-punctuation">: </span>*
<span class="hljs-attribute">Disallow</span><span class="hljs-punctuation">: </span>/record
<span class="hljs-attribute">Disallow</span><span class="hljs-punctuation">: </span>/recordnew</code></pre><h2 id="爬取题目信息">爬取题目信息</h2><h3 id="题目数据获取">题目数据获取</h3><p>先使用 <code>curl</code> 获取洛谷的题目页面：</p><p><img src="https://s1.baoshuo.ren/2020/11/26/JageUdcpXTthIjM.png" alt="" loading="lazy"></p><p>可以看出我们需要的数据都在传入给 <code>decodeURIComponent()</code> 函数的字符串中，正则匹配取出即可。</p><p>下面是代码实现：</p><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python3</span>
<span class="hljs-comment"># coding: utf-8</span>

<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> unquote

<span class="hljs-comment"># 设置请求头</span>
headers = {
    <span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 Spider/0.1"</span>
}

<span class="hljs-keyword">def</span> <span class="hljs-title function_">getProblemJSON</span>(<span class="hljs-params">pid</span>):
    <span class="hljs-keyword">return</span> json.loads(unquote(<span class="hljs-built_in">str</span>(re.findall(<span class="hljs-string">r'decodeURIComponent\("(.*)"\)'</span>, requests.get(url=<span class="hljs-string">"https://www.luogu.com.cn/problem/P1000"</span>, headers=headers).text)[<span class="hljs-number">0</span>])))

data = getProblemJSON(<span class="hljs-string">"P1000"</span>)
<span class="hljs-built_in">print</span>(json.dumps(data[<span class="hljs-string">'currentData'</span>], sort_keys=<span class="hljs-literal">True</span>, indent=<span class="hljs-number">4</span>))</code></pre><p>Update at 2021/02/05:</p><p>添加参数 <code>_contentOnly=1</code> 可以直接获取 JSON 格式的信息，无需再正则匹配。</p><pre><code class="hljs diff"><span class="hljs-comment">--- a/tools/spider.py</span>
<span class="hljs-comment">+++ b/tools/spider.py</span>
<span class="hljs-meta">@@ -19,8 +19,7 @@</span>
 def getProblem(pid):
<span class="hljs-deletion">-    url = f"https://www.luogu.com.cn/problem/{pid}"</span>
<span class="hljs-deletion">-    redata = re.findall(r'decodeURIComponent\("(.*)"\)',</span>
<span class="hljs-deletion">-                        requests.get(url, headers=headers).text)</span>
<span class="hljs-addition">+    url = f"https://www.luogu.com.cn/problem/{pid}?_contentOnly=1"</span>
<span class="hljs-addition">+    redata = requests.get(url, headers=headers).text</span>
     if len(redata) == 0:
         return { "code": 403 }
     else:
<span class="hljs-deletion">-        return json.loads(unquote(redata[0]))</span>
<span class="hljs-addition">+        return json.loads(redata)</span></code></pre><h3 id="处理题目数据">处理题目数据</h3><p>这里只留下 <code>currentData.problem</code> 字段里面的内容即可。</p><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python3</span>
<span class="hljs-comment"># coding: utf-8</span>

<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> unquote

f = <span class="hljs-built_in">open</span>(<span class="hljs-string">'problems.json'</span>, <span class="hljs-string">'w'</span>)
res = []

headers = {
    <span class="hljs-string">"user-agent"</span>: <span class="hljs-string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4331.0 Safari/537.36 spider/0.1"</span>,
}


<span class="hljs-keyword">def</span> <span class="hljs-title function_">getProblem</span>(<span class="hljs-params">pid</span>):
    <span class="hljs-keyword">return</span> json.loads(requests.get(<span class="hljs-string">f"https://www.luogu.com.cn/problem/<span class="hljs-subst">{pid}</span>?_contentOnly=1"</span>, headers=headers).text)[<span class="hljs-string">'currentData'</span>]


<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">1010</span>):
    tmpdict = {}
    tmpdict[<span class="hljs-string">"pid"</span>] = <span class="hljs-string">f"P<span class="hljs-subst">{i}</span>"</span>
    tmpdict[<span class="hljs-string">"data"</span>] = getProblem(<span class="hljs-string">f"P<span class="hljs-subst">{i}</span>"</span>)[<span class="hljs-string">"problem"</span>]
    res.append(tmpdict)

<span class="hljs-comment"># print(res)</span>
f.write(json.dumps(res, indent=<span class="hljs-number">4</span>).replace(<span class="hljs-string">"\\t"</span>, <span class="hljs-string">"    "</span>))</code></pre><h3 id="最终代码">最终代码</h3><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python3</span>
<span class="hljs-comment"># coding: utf-8</span>

<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> pymongo

dbclient = pymongo.MongoClient(<span class="hljs-string">"mongodb://127.0.0.1:27017/"</span>)
luogudb = dbclient[<span class="hljs-string">"luogu"</span>]
dbcol = luogudb[<span class="hljs-string">"problem"</span>]

headers = {
    <span class="hljs-string">"user-agent"</span>: <span class="hljs-string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4331.0 Safari/537.36 spider/0.1"</span>,
}


<span class="hljs-keyword">def</span> <span class="hljs-title function_">getProblem</span>(<span class="hljs-params">pid</span>):
    url = <span class="hljs-string">f"https://www.luogu.com.cn/problem/<span class="hljs-subst">{pid}</span>?_contentOnly=1"</span>
    redata = requests.get(url, headers=headers).text
    <span class="hljs-keyword">return</span> json.loads(redata)

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">7103</span>):
    pid = <span class="hljs-string">f"P<span class="hljs-subst">{i}</span>"</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">list</span>(dbcol.find({<span class="hljs-string">'pid'</span>: pid})) == []:
        tmpdict = {}
        tmpdict[<span class="hljs-string">"pid"</span>] = pid
        tmpdata = getProblem(pid)
        <span class="hljs-keyword">if</span> tmpdata[<span class="hljs-string">"code"</span>] == <span class="hljs-number">200</span>:
            tmpdict[<span class="hljs-string">"data"</span>] = getProblem(pid)[<span class="hljs-string">"currentData"</span>][<span class="hljs-string">"problem"</span>]
            dbcol.insert_one(tmpdict)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Successfully get problem <span class="hljs-subst">{pid}</span>."</span>)
            time.sleep(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Fail to get problem <span class="hljs-subst">{pid}</span>."</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Problem <span class="hljs-subst">{pid}</span> is already exists."</span>)</code></pre><p>有关于数据库读写的部分请参考下文的 <a href="#%E6%95%B0%E6%8D%AE%E5%BA%93">数据库</a> 部分。</p><h2 id="爬取用户信息">爬取用户信息</h2><p>结构与题目爬虫类似，故不再作代码说明。</p><pre><code class="hljs python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> pymongo
<span class="hljs-keyword">import</span> requests

dbclient = pymongo.MongoClient(<span class="hljs-string">"mongodb://127.0.0.1:27017/"</span>)
luogudb = dbclient[<span class="hljs-string">"luogu"</span>]
dbcol = luogudb[<span class="hljs-string">"user"</span>]

headers = { <span class="hljs-string">"User-Agent"</span>: <span class="hljs-string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4331.0 Safari/537.36"</span>, }

<span class="hljs-keyword">def</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params">uid</span>):
    url = <span class="hljs-string">f"https://www.luogu.com.cn/user/<span class="hljs-subst">{uid}</span>?_contentOnly=1"</span>
    redata = requests.get(url, headers=headers).text
    <span class="hljs-keyword">return</span> json.loads(redata)

<span class="hljs-keyword">for</span> uid <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">list</span>(dbcol.find({<span class="hljs-string">'uid'</span>: uid})) == []:
        tmpdict = {}
        tmpdict[<span class="hljs-string">"_id"</span>] = uid
        tmpdict[<span class="hljs-string">"uid"</span>] = uid
        tmpdata = getUser(uid)
        <span class="hljs-keyword">if</span> tmpdata[<span class="hljs-string">"code"</span>] == <span class="hljs-number">200</span>:
            tmpdict[<span class="hljs-string">"data"</span>] = tmpdata[<span class="hljs-string">"currentData"</span>][<span class="hljs-string">"user"</span>]
            dbcol.insert_one(tmpdict)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Successfully get user <span class="hljs-subst">{uid}</span>."</span>)
            time.sleep(<span class="hljs-number">0.5</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Fail to get user <span class="hljs-subst">{uid}</span>."</span>)
            time.sleep(<span class="hljs-number">0.5</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"User <span class="hljs-subst">{uid}</span> is already exists."</span>)</code></pre><h2 id="数据库">数据库</h2><h3 id="搭建数据库">搭建数据库</h3><p>搭建 MongoDB 数据库只需要在 docker 里面跑一个容器，非常简便。</p><pre><code class="hljs bash">docker run -v /root/data/mongo:/data/db -itd --name mongo -p 27017:27017 mongo</code></pre><h3 id="连接数据库">连接数据库</h3><pre><code class="hljs python">client = pymongo.MongoClient(<span class="hljs-string">"mongodb://127.0.0.1:27017/"</span>)
luogudb = dbclient[<span class="hljs-string">"luogu"</span>]
col = luogudb[<span class="hljs-string">"problem"</span>]</code></pre><h3 id="存储数据">存储数据</h3><pre><code class="hljs python"><span class="hljs-keyword">if</span> <span class="hljs-built_in">list</span>(col.find({<span class="hljs-string">'pid'</span> : pid})) == []:
    col.insert_one(data)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Success."</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Already exists."</span>)</code></pre><h3 id="读取数据">读取数据</h3><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(col.find()))</code></pre><h2 id="web-管理数据库">web 管理数据库</h2><p>再跑一个 <code>mongo-express</code> 就行了。</p><pre><code class="hljs bash">docker run -d --name mongo-express -e ME_CONFIG_MONGODB_SERVER=host.docker.internal -p 8081:8081 mongo-express</code></pre><p>访问 <code>ip:8081</code> 就能看到管理界面了。</p><h2 id="导出数据库">导出数据库</h2><p>直接运行下方命令导出为 JSON 格式即可。</p><pre><code class="hljs bash">mongoexport -d luogu -c problem -o /data/db/problem.json</code></pre><p>或者点击对应数据库管理界面中的 <code>[JSON]</code> 按钮导出。</p><p><img src="https://s1.baoshuo.ren/2020/11/26/hXtVAynYGcb8B71.png" alt="" loading="lazy"></p><h2 id="成果">成果</h2><p>断断续续爬了一个多星期，终于爬完了。</p><p><img src="https://s1.baoshuo.ren/2020/11/26/7muojQZM125gWXL.png" alt="" loading="lazy"></p></section><div class="cjScYX jnGacs kpCrIt bMSzLf cvPkWa iigETV dUvWpK hRLVFh "><div class="bpQkXn ">洛谷爬虫</div><div><a class="kpaoc dLUwcr gcQrEv cdhcuu " href="/post/luogu-spider/">https://blog.baoshuo.ren/post/luogu-spider/</a></div><div class="gSBWlu kiDYix cUXNmd "><div class="gSBWlu iMkoWi hriXhD jjryqL biWxPv "><div class="chVqDG ">本文作者</div><div><a class="fyuAJJ bbUXPo cdhcuu " href="https://baoshuo.ren" target="_blank">宝硕</a></div></div><div class="gSBWlu iMkoWi hriXhD jjryqL biWxPv "><div class="chVqDG ">发布于</div><time datetime="2020-11-26T06:55:02.000Z">2020-11-26</time></div><div class="gSBWlu iMkoWi hriXhD jjryqL biWxPv "><div class="chVqDG ">版权协议</div><div><a class="fyuAJJ bbUXPo cdhcuu " href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans" target="_blank" rel="license noopener noreferrer">CC BY-NC-SA 4.0</a></div></div></div><div class="chVqDG ">转载或引用本文时请遵守许可协议，注明出处、不得用于商业用途！</div><i class="cpOcAb bEvNbr eLDTYY iRjWhb QcCvg jdKAzd krZeLX gjJDYK dZDNG gMDOZu cgEEZJ gqWyNB ktfQGr FwRrA cDIyHz hpBjJb ycSPk ctWdVF jkGfDR bSTogt hSDpeY julXB kvHVCE lpnDDz ebRqqn bWKMJW eQlDDM kSnqYR fgiDpI eeAUEW ecjlX cDxIqC jpWidM jzdNVF bPkdhG bnSwfb fQfkux dPenaT NpaJd jgAayQ fqXcHQ dyMCpl jMYtKl blQfIT lijgUQ ccSWYO eGyfkC hhBXzE iyXZtO jZLyOQ beJoMJ iJgiCW hqUHPA jWWlrr hZGkn chpxwD beuMzX dbtvqd jPcnDC "></i></div></article><div class="gCwvuy kRQsoY jBvrhX dgtTIu eXJtsk dvivnl llUCyD dPAasc icKiSN bMSzLf fZMRmg iigETV ipEZTh eRVtDl cUXNmd jdraHW biWxPv eqrBPF kooHYa kroOag"><div>喜欢这篇文章？为什么不考虑打赏一下作者呢？</div><a class="cyerGB moyUB lexxaO ebVilo kyhYEz jIkFRm gpptow bbUXPo kMKXDC ftIldC jOeduE iDuqPI cpOcAb eAOGpx " href="https://afdian.net/@baoshuo" target="_blank" rel="noopener noreferrer">爱发电</a></div><div class="gSBWlu ipEZTh eRVtDl cUXNmd jdraHW biWxPv eqrBPF gvwkfp bRNbBj"><div class="gSBWlu dQPgRK eKlQYW bLlOeF fPWmiY hmKFEM "><a class="gSBWlu foGVKH dgIPcR kVZHcH cVJMrm iATxZH JxWnH " href="/post/download-smms-image/"><i class="dSxtaa bLHLvQ eLDTYY cjScYX cpOcAb jXmXEB hHGIsI julXB kvHVCE jbzBdl SeaTL gjJuRC iWYpgm iHkzF kSnqYR fgiDpI eeAUEW ecjlX fIXfpL ergVCo cqyuit hCTuXM "></i>下载自己在 SM.MS 图床上的所有图片</a></div><div class="gSBWlu dQPgRK eKlQYW bLlOeF fXzCvR klEWBS "><a class="gSBWlu foGVKH dgIPcR kVZHcH cVJMrm iATxZH JxWnH " href="/post/change-git-submission-email/">批量修改 Git 仓库的提交邮箱<i class="kUPESX bLHLvQ eLDTYY cjScYX cpOcAb jXmXEB hHGIsI julXB kvHVCE jbzBdl gUiFRX dixaxG jmWgOv bTanCN kSnqYR fgiDpI eeAUEW ecjlX fIXfpL ergVCo cqyuit hCTuXM "></i></a></div></div><div></div></main></div><div class="imhmwA sKExc bjOGUo eSaSrN "><div class="fyuAJJ kQBRAp bcfNhz edKxdA osxXp foquGP lhTVEC kRQsoY jBvrhX dgtTIu eXJtsk cyerGB egGyMq jsvbrX dPAasc "><i class="cpOcAb cjScYX hHGIsI jXmXEB bLHLvQ eLDTYY dhOkuk julXB hCTuXM cqyuit kvHVCE SeaTL kSnqYR jFCJJY iqzSxf bQvqKh "></i></div><a class="fyuAJJ kQBRAp bcfNhz edKxdA osxXp foquGP lhTVEC kRQsoY jBvrhX dgtTIu eXJtsk cyerGB egGyMq jsvbrX dPAasc " href="#"><i class="cpOcAb cjScYX hHGIsI jXmXEB bLHLvQ eLDTYY dhOkuk julXB hCTuXM cqyuit kvHVCE kSnqYR fgiDpI eeAUEW ecjlX SeaTL gjJuRC iWYpgm iHkzF ergVCo jbBqfU fIXfpL "></i></a></div><footer class="eGElBa ftIldC eBrwtd iDuqPI kpaoc gCwvuy kooHYa eAOGpx dPAasc kKplrA jzScEz hMoAFf bccxkr cgjdEA "><div class="kQBRAp kroOag jZOgvY uUxpw "><div>Copyright © 2019 - <!-- -->2022<!-- --> <a class="fyuAJJ jSOKOm cdhcuu kOZsAO " href="/">宝硕博客</a><span class="jTjNVR iawFZL hNjeNG kswRdL gKQCBv "></span><a class="fyuAJJ jSOKOm cdhcuu kOZsAO " href="https://beian.miit.gov.cn" target="_blank" rel="noopener noreferer nofollow">冀ICP备15024669号-3</a></div><div>Powered by<!-- --> <a class="laXLGQ jSOKOm cdhcuu " href="https://nextjs.org" target="_blank" rel="noopener noreferer nofollow">Next.js</a> &amp; <a class="laXLGQ jSOKOm cdhcuu " href="https://hexo.io" target="_blank" rel="noopener noreferer nofollow">Hexo</a><span class="jTjNVR iawFZL hNjeNG kswRdL gKQCBv "></span>Theme by<!-- --> <a class="laXLGQ jSOKOm cdhcuu " href="https://baoshuo.ren" target="_blank">Baoshuo</a></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"洛谷爬虫 - 宝硕博客","post":{"title":"洛谷爬虫","excerpt":"截至目前，洛谷已经有了近两万道题目和四十余万名用户。本代码爬取了一些样本，以供后续（可能）的数据分析。","content":[["$","p",{},["截至目前，洛谷已经有了近两万道题目和四十余万名用户。本代码爬取了一些样本，以供后续（可能）的数据分析。"]],["$","span",{"id":"more"},[]],["$","p",{},["本次爬取遵守洛谷的 ",["$","code",{},["robots.txt"]]," 中的要求，不爬取提交记录页面。为了避免影响洛谷的正常运行，脚本只采用单线程进行爬取。"]],["$","pre",{},[["$","code",{"class":"hljs http"},[["$","span",{"class":"hljs-attribute"},["User-Agent"]],["$","span",{"class":"hljs-punctuation"},[": "]],"*\n",["$","span",{"class":"hljs-attribute"},["Disallow"]],["$","span",{"class":"hljs-punctuation"},[": "]],"/record\n",["$","span",{"class":"hljs-attribute"},["Disallow"]],["$","span",{"class":"hljs-punctuation"},[": "]],"/recordnew"]]]],["$","h2",{"id":"爬取题目信息"},["爬取题目信息"]],["$","h3",{"id":"题目数据获取"},["题目数据获取"]],["$","p",{},["先使用 ",["$","code",{},["curl"]]," 获取洛谷的题目页面："]],["$","p",{},[["$","img",{"src":"https://s1.baoshuo.ren/2020/11/26/JageUdcpXTthIjM.png","alt":"","loading":"lazy"},[]]]],["$","p",{},["可以看出我们需要的数据都在传入给 ",["$","code",{},["decodeURIComponent()"]]," 函数的字符串中，正则匹配取出即可。"]],["$","p",{},["下面是代码实现："]],["$","pre",{},[["$","code",{"class":"hljs python"},[["$","span",{"class":"hljs-comment"},["#!/usr/bin/python3"]],"\n",["$","span",{"class":"hljs-comment"},["# coding: utf-8"]],"\n\n",["$","span",{"class":"hljs-keyword"},["import"]]," requests\n",["$","span",{"class":"hljs-keyword"},["import"]]," re\n",["$","span",{"class":"hljs-keyword"},["import"]]," json\n",["$","span",{"class":"hljs-keyword"},["from"]]," urllib.parse ",["$","span",{"class":"hljs-keyword"},["import"]]," unquote\n\n",["$","span",{"class":"hljs-comment"},["# 设置请求头"]],"\nheaders = {\n    ",["$","span",{"class":"hljs-string"},["\"User-Agent\""]],": ",["$","span",{"class":"hljs-string"},["\"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 Spider/0.1\""]],"\n}\n\n",["$","span",{"class":"hljs-keyword"},["def"]]," ",["$","span",{"class":"hljs-title function_"},["getProblemJSON"]],"(",["$","span",{"class":"hljs-params"},["pid"]],"):\n    ",["$","span",{"class":"hljs-keyword"},["return"]]," json.loads(unquote(",["$","span",{"class":"hljs-built_in"},["str"]],"(re.findall(",["$","span",{"class":"hljs-string"},["r'decodeURIComponent\\(\"(.*)\"\\)'"]],", requests.get(url=",["$","span",{"class":"hljs-string"},["\"https://www.luogu.com.cn/problem/P1000\""]],", headers=headers).text)[",["$","span",{"class":"hljs-number"},["0"]],"])))\n\ndata = getProblemJSON(",["$","span",{"class":"hljs-string"},["\"P1000\""]],")\n",["$","span",{"class":"hljs-built_in"},["print"]],"(json.dumps(data[",["$","span",{"class":"hljs-string"},["'currentData'"]],"], sort_keys=",["$","span",{"class":"hljs-literal"},["True"]],", indent=",["$","span",{"class":"hljs-number"},["4"]],"))"]]]],["$","p",{},["Update at 2021/02/05:"]],["$","p",{},["添加参数 ",["$","code",{},["_contentOnly=1"]]," 可以直接获取 JSON 格式的信息，无需再正则匹配。"]],["$","pre",{},[["$","code",{"class":"hljs diff"},[["$","span",{"class":"hljs-comment"},["--- a/tools/spider.py"]],"\n",["$","span",{"class":"hljs-comment"},["+++ b/tools/spider.py"]],"\n",["$","span",{"class":"hljs-meta"},["@@ -19,8 +19,7 @@"]],"\n def getProblem(pid):\n",["$","span",{"class":"hljs-deletion"},["-    url = f\"https://www.luogu.com.cn/problem/{pid}\""]],"\n",["$","span",{"class":"hljs-deletion"},["-    redata = re.findall(r'decodeURIComponent\\(\"(.*)\"\\)',"]],"\n",["$","span",{"class":"hljs-deletion"},["-                        requests.get(url, headers=headers).text)"]],"\n",["$","span",{"class":"hljs-addition"},["+    url = f\"https://www.luogu.com.cn/problem/{pid}?_contentOnly=1\""]],"\n",["$","span",{"class":"hljs-addition"},["+    redata = requests.get(url, headers=headers).text"]],"\n     if len(redata) == 0:\n         return { \"code\": 403 }\n     else:\n",["$","span",{"class":"hljs-deletion"},["-        return json.loads(unquote(redata[0]))"]],"\n",["$","span",{"class":"hljs-addition"},["+        return json.loads(redata)"]]]]]],["$","h3",{"id":"处理题目数据"},["处理题目数据"]],["$","p",{},["这里只留下 ",["$","code",{},["currentData.problem"]]," 字段里面的内容即可。"]],["$","pre",{},[["$","code",{"class":"hljs python"},[["$","span",{"class":"hljs-comment"},["#!/usr/bin/python3"]],"\n",["$","span",{"class":"hljs-comment"},["# coding: utf-8"]],"\n\n",["$","span",{"class":"hljs-keyword"},["import"]]," requests\n",["$","span",{"class":"hljs-keyword"},["import"]]," re\n",["$","span",{"class":"hljs-keyword"},["import"]]," json\n",["$","span",{"class":"hljs-keyword"},["from"]]," urllib.parse ",["$","span",{"class":"hljs-keyword"},["import"]]," unquote\n\nf = ",["$","span",{"class":"hljs-built_in"},["open"]],"(",["$","span",{"class":"hljs-string"},["'problems.json'"]],", ",["$","span",{"class":"hljs-string"},["'w'"]],")\nres = []\n\nheaders = {\n    ",["$","span",{"class":"hljs-string"},["\"user-agent\""]],": ",["$","span",{"class":"hljs-string"},["\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4331.0 Safari/537.36 spider/0.1\""]],",\n}\n\n\n",["$","span",{"class":"hljs-keyword"},["def"]]," ",["$","span",{"class":"hljs-title function_"},["getProblem"]],"(",["$","span",{"class":"hljs-params"},["pid"]],"):\n    ",["$","span",{"class":"hljs-keyword"},["return"]]," json.loads(requests.get(",["$","span",{"class":"hljs-string"},["f\"https://www.luogu.com.cn/problem/",["$","span",{"class":"hljs-subst"},["{pid}"]],"?_contentOnly=1\""]],", headers=headers).text)[",["$","span",{"class":"hljs-string"},["'currentData'"]],"]\n\n\n",["$","span",{"class":"hljs-keyword"},["for"]]," i ",["$","span",{"class":"hljs-keyword"},["in"]]," ",["$","span",{"class":"hljs-built_in"},["range"]],"(",["$","span",{"class":"hljs-number"},["1000"]],", ",["$","span",{"class":"hljs-number"},["1010"]],"):\n    tmpdict = {}\n    tmpdict[",["$","span",{"class":"hljs-string"},["\"pid\""]],"] = ",["$","span",{"class":"hljs-string"},["f\"P",["$","span",{"class":"hljs-subst"},["{i}"]],"\""]],"\n    tmpdict[",["$","span",{"class":"hljs-string"},["\"data\""]],"] = getProblem(",["$","span",{"class":"hljs-string"},["f\"P",["$","span",{"class":"hljs-subst"},["{i}"]],"\""]],")[",["$","span",{"class":"hljs-string"},["\"problem\""]],"]\n    res.append(tmpdict)\n\n",["$","span",{"class":"hljs-comment"},["# print(res)"]],"\nf.write(json.dumps(res, indent=",["$","span",{"class":"hljs-number"},["4"]],").replace(",["$","span",{"class":"hljs-string"},["\"\\\\t\""]],", ",["$","span",{"class":"hljs-string"},["\"    \""]],"))"]]]],["$","h3",{"id":"最终代码"},["最终代码"]],["$","pre",{},[["$","code",{"class":"hljs python"},[["$","span",{"class":"hljs-comment"},["#!/usr/bin/python3"]],"\n",["$","span",{"class":"hljs-comment"},["# coding: utf-8"]],"\n\n",["$","span",{"class":"hljs-keyword"},["import"]]," requests\n",["$","span",{"class":"hljs-keyword"},["import"]]," json\n",["$","span",{"class":"hljs-keyword"},["import"]]," time\n",["$","span",{"class":"hljs-keyword"},["import"]]," pymongo\n\ndbclient = pymongo.MongoClient(",["$","span",{"class":"hljs-string"},["\"mongodb://127.0.0.1:27017/\""]],")\nluogudb = dbclient[",["$","span",{"class":"hljs-string"},["\"luogu\""]],"]\ndbcol = luogudb[",["$","span",{"class":"hljs-string"},["\"problem\""]],"]\n\nheaders = {\n    ",["$","span",{"class":"hljs-string"},["\"user-agent\""]],": ",["$","span",{"class":"hljs-string"},["\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4331.0 Safari/537.36 spider/0.1\""]],",\n}\n\n\n",["$","span",{"class":"hljs-keyword"},["def"]]," ",["$","span",{"class":"hljs-title function_"},["getProblem"]],"(",["$","span",{"class":"hljs-params"},["pid"]],"):\n    url = ",["$","span",{"class":"hljs-string"},["f\"https://www.luogu.com.cn/problem/",["$","span",{"class":"hljs-subst"},["{pid}"]],"?_contentOnly=1\""]],"\n    redata = requests.get(url, headers=headers).text\n    ",["$","span",{"class":"hljs-keyword"},["return"]]," json.loads(redata)\n\n",["$","span",{"class":"hljs-keyword"},["for"]]," i ",["$","span",{"class":"hljs-keyword"},["in"]]," ",["$","span",{"class":"hljs-built_in"},["range"]],"(",["$","span",{"class":"hljs-number"},["1000"]],", ",["$","span",{"class":"hljs-number"},["7103"]],"):\n    pid = ",["$","span",{"class":"hljs-string"},["f\"P",["$","span",{"class":"hljs-subst"},["{i}"]],"\""]],"\n    ",["$","span",{"class":"hljs-keyword"},["if"]]," ",["$","span",{"class":"hljs-built_in"},["list"]],"(dbcol.find({",["$","span",{"class":"hljs-string"},["'pid'"]],": pid})) == []:\n        tmpdict = {}\n        tmpdict[",["$","span",{"class":"hljs-string"},["\"pid\""]],"] = pid\n        tmpdata = getProblem(pid)\n        ",["$","span",{"class":"hljs-keyword"},["if"]]," tmpdata[",["$","span",{"class":"hljs-string"},["\"code\""]],"] == ",["$","span",{"class":"hljs-number"},["200"]],":\n            tmpdict[",["$","span",{"class":"hljs-string"},["\"data\""]],"] = getProblem(pid)[",["$","span",{"class":"hljs-string"},["\"currentData\""]],"][",["$","span",{"class":"hljs-string"},["\"problem\""]],"]\n            dbcol.insert_one(tmpdict)\n            ",["$","span",{"class":"hljs-built_in"},["print"]],"(",["$","span",{"class":"hljs-string"},["f\"Successfully get problem ",["$","span",{"class":"hljs-subst"},["{pid}"]],".\""]],")\n            time.sleep(",["$","span",{"class":"hljs-number"},["1"]],")\n        ",["$","span",{"class":"hljs-keyword"},["else"]],":\n            ",["$","span",{"class":"hljs-built_in"},["print"]],"(",["$","span",{"class":"hljs-string"},["f\"Fail to get problem ",["$","span",{"class":"hljs-subst"},["{pid}"]],".\""]],")\n    ",["$","span",{"class":"hljs-keyword"},["else"]],":\n        ",["$","span",{"class":"hljs-built_in"},["print"]],"(",["$","span",{"class":"hljs-string"},["f\"Problem ",["$","span",{"class":"hljs-subst"},["{pid}"]]," is already exists.\""]],")"]]]],["$","p",{},["有关于数据库读写的部分请参考下文的 ",["$","a",{"href":"#%E6%95%B0%E6%8D%AE%E5%BA%93"},["数据库"]]," 部分。"]],["$","h2",{"id":"爬取用户信息"},["爬取用户信息"]],["$","p",{},["结构与题目爬虫类似，故不再作代码说明。"]],["$","pre",{},[["$","code",{"class":"hljs python"},[["$","span",{"class":"hljs-keyword"},["import"]]," json\n",["$","span",{"class":"hljs-keyword"},["import"]]," time\n",["$","span",{"class":"hljs-keyword"},["import"]]," pymongo\n",["$","span",{"class":"hljs-keyword"},["import"]]," requests\n\ndbclient = pymongo.MongoClient(",["$","span",{"class":"hljs-string"},["\"mongodb://127.0.0.1:27017/\""]],")\nluogudb = dbclient[",["$","span",{"class":"hljs-string"},["\"luogu\""]],"]\ndbcol = luogudb[",["$","span",{"class":"hljs-string"},["\"user\""]],"]\n\nheaders = { ",["$","span",{"class":"hljs-string"},["\"User-Agent\""]],": ",["$","span",{"class":"hljs-string"},["\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4331.0 Safari/537.36\""]],", }\n\n",["$","span",{"class":"hljs-keyword"},["def"]]," ",["$","span",{"class":"hljs-title function_"},["getUser"]],"(",["$","span",{"class":"hljs-params"},["uid"]],"):\n    url = ",["$","span",{"class":"hljs-string"},["f\"https://www.luogu.com.cn/user/",["$","span",{"class":"hljs-subst"},["{uid}"]],"?_contentOnly=1\""]],"\n    redata = requests.get(url, headers=headers).text\n    ",["$","span",{"class":"hljs-keyword"},["return"]]," json.loads(redata)\n\n",["$","span",{"class":"hljs-keyword"},["for"]]," uid ",["$","span",{"class":"hljs-keyword"},["in"]]," ",["$","span",{"class":"hljs-built_in"},["range"]],"(",["$","span",{"class":"hljs-number"},["1"]],", ",["$","span",{"class":"hljs-number"},["2"]],"):\n    ",["$","span",{"class":"hljs-keyword"},["if"]]," ",["$","span",{"class":"hljs-built_in"},["list"]],"(dbcol.find({",["$","span",{"class":"hljs-string"},["'uid'"]],": uid})) == []:\n        tmpdict = {}\n        tmpdict[",["$","span",{"class":"hljs-string"},["\"_id\""]],"] = uid\n        tmpdict[",["$","span",{"class":"hljs-string"},["\"uid\""]],"] = uid\n        tmpdata = getUser(uid)\n        ",["$","span",{"class":"hljs-keyword"},["if"]]," tmpdata[",["$","span",{"class":"hljs-string"},["\"code\""]],"] == ",["$","span",{"class":"hljs-number"},["200"]],":\n            tmpdict[",["$","span",{"class":"hljs-string"},["\"data\""]],"] = tmpdata[",["$","span",{"class":"hljs-string"},["\"currentData\""]],"][",["$","span",{"class":"hljs-string"},["\"user\""]],"]\n            dbcol.insert_one(tmpdict)\n            ",["$","span",{"class":"hljs-built_in"},["print"]],"(",["$","span",{"class":"hljs-string"},["f\"Successfully get user ",["$","span",{"class":"hljs-subst"},["{uid}"]],".\""]],")\n            time.sleep(",["$","span",{"class":"hljs-number"},["0.5"]],")\n        ",["$","span",{"class":"hljs-keyword"},["else"]],":\n            ",["$","span",{"class":"hljs-built_in"},["print"]],"(",["$","span",{"class":"hljs-string"},["f\"Fail to get user ",["$","span",{"class":"hljs-subst"},["{uid}"]],".\""]],")\n            time.sleep(",["$","span",{"class":"hljs-number"},["0.5"]],")\n    ",["$","span",{"class":"hljs-keyword"},["else"]],":\n        ",["$","span",{"class":"hljs-built_in"},["print"]],"(",["$","span",{"class":"hljs-string"},["f\"User ",["$","span",{"class":"hljs-subst"},["{uid}"]]," is already exists.\""]],")"]]]],["$","h2",{"id":"数据库"},["数据库"]],["$","h3",{"id":"搭建数据库"},["搭建数据库"]],["$","p",{},["搭建 MongoDB 数据库只需要在 docker 里面跑一个容器，非常简便。"]],["$","pre",{},[["$","code",{"class":"hljs bash"},["docker run -v /root/data/mongo:/data/db -itd --name mongo -p 27017:27017 mongo"]]]],["$","h3",{"id":"连接数据库"},["连接数据库"]],["$","pre",{},[["$","code",{"class":"hljs python"},["client = pymongo.MongoClient(",["$","span",{"class":"hljs-string"},["\"mongodb://127.0.0.1:27017/\""]],")\nluogudb = dbclient[",["$","span",{"class":"hljs-string"},["\"luogu\""]],"]\ncol = luogudb[",["$","span",{"class":"hljs-string"},["\"problem\""]],"]"]]]],["$","h3",{"id":"存储数据"},["存储数据"]],["$","pre",{},[["$","code",{"class":"hljs python"},[["$","span",{"class":"hljs-keyword"},["if"]]," ",["$","span",{"class":"hljs-built_in"},["list"]],"(col.find({",["$","span",{"class":"hljs-string"},["'pid'"]]," : pid})) == []:\n    col.insert_one(data)\n    ",["$","span",{"class":"hljs-built_in"},["print"]],"(",["$","span",{"class":"hljs-string"},["\"Success.\""]],")\n",["$","span",{"class":"hljs-keyword"},["else"]],":\n    ",["$","span",{"class":"hljs-built_in"},["print"]],"(",["$","span",{"class":"hljs-string"},["\"Already exists.\""]],")"]]]],["$","h3",{"id":"读取数据"},["读取数据"]],["$","pre",{},[["$","code",{"class":"hljs python"},[["$","span",{"class":"hljs-built_in"},["print"]],"(",["$","span",{"class":"hljs-built_in"},["list"]],"(col.find()))"]]]],["$","h2",{"id":"web-管理数据库"},["web 管理数据库"]],["$","p",{},["再跑一个 ",["$","code",{},["mongo-express"]]," 就行了。"]],["$","pre",{},[["$","code",{"class":"hljs bash"},["docker run -d --name mongo-express -e ME_CONFIG_MONGODB_SERVER=host.docker.internal -p 8081:8081 mongo-express"]]]],["$","p",{},["访问 ",["$","code",{},["ip:8081"]]," 就能看到管理界面了。"]],["$","h2",{"id":"导出数据库"},["导出数据库"]],["$","p",{},["直接运行下方命令导出为 JSON 格式即可。"]],["$","pre",{},[["$","code",{"class":"hljs bash"},["mongoexport -d luogu -c problem -o /data/db/problem.json"]]]],["$","p",{},["或者点击对应数据库管理界面中的 ",["$","code",{},["[JSON]"]]," 按钮导出。"]],["$","p",{},[["$","img",{"src":"https://s1.baoshuo.ren/2020/11/26/hXtVAynYGcb8B71.png","alt":"","loading":"lazy"},[]]]],["$","h2",{"id":"成果"},["成果"]],["$","p",{},["断断续续爬了一个多星期，终于爬完了。"]],["$","p",{},[["$","img",{"src":"https://s1.baoshuo.ren/2020/11/26/7muojQZM125gWXL.png","alt":"","loading":"lazy"},[]]]]],"thumb":null,"date":"2020-11-26","updated":"2020-11-26","isoDate":"2020-11-26T06:55:02.000Z","isoUpdate":"2020-11-26T06:55:02.000Z","categories":[{"name":"技术向","url":"/categories/%E6%8A%80%E6%9C%AF%E5%90%91/"}],"tags":[],"license":null,"permalink":"https://blog.baoshuo.ren/post/luogu-spider/","url":"/post/luogu-spider/","prev":{"title":"下载自己在 SM.MS 图床上的所有图片","url":"/post/download-smms-image/"},"next":{"title":"批量修改 Git 仓库的提交邮箱","url":"/post/change-git-submission-email/"},"toc":{"0":{"0":{"text":"题目数据获取","id":"题目数据获取"},"1":{"text":"处理题目数据","id":"处理题目数据"},"2":{"text":"最终代码","id":"最终代码"},"text":"爬取题目信息","id":"爬取题目信息"},"1":{"text":"爬取用户信息","id":"爬取用户信息"},"2":{"0":{"text":"搭建数据库","id":"搭建数据库"},"1":{"text":"连接数据库","id":"连接数据库"},"2":{"text":"存储数据","id":"存储数据"},"3":{"text":"读取数据","id":"读取数据"},"text":"数据库","id":"数据库"},"3":{"text":"web 管理数据库","id":"web-管理数据库"},"4":{"text":"导出数据库","id":"导出数据库"},"5":{"text":"成果","id":"成果"}},"hasToc":true,"comments":true,"wordCount":"约 1.2 千字"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"luogu-spider"},"buildId":"xPJp9HILMjfmWDWxtg29J","assetPrefix":"https://static.cdn.baoshuo.ren/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>