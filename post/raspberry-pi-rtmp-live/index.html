<!DOCTYPE html><html lang="zh-CN"><head><meta name="viewport" content="width=device-width"><meta charset="utf-8"><link rel="alternate" type="application/atom+xml" href="/atom.xml" title="宝硕博客"><meta property="og:site_name" content="宝硕博客"><meta property="og:image" content="https://cdn.jsdelivr.net/npm/bsi@0.0.6/favicon/256x256.png"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@renbaoshuo"><meta name="twitter:creator" content="@renbaoshuo"><title>使用树莓派+Nginx搭建 Rtmp 直播服务 - 宝硕博客</title><meta name="description" content="国庆在家闲着没啥事，把一直在角落里吃灰的树莓派 4B 拿出来捣鼓了几下。"><meta property="og:description" content="国庆在家闲着没啥事，把一直在角落里吃灰的树莓派 4B 拿出来捣鼓了几下。"><meta name="keywords" content="[object Object]"><meta property="og:type" content="article"><meta property="og:title" content="使用树莓派+Nginx搭建 Rtmp 直播服务 - 宝硕博客"><meta property="og:url" content="/post/raspberry-pi-rtmp-live/"><link rel="canonical" href="/post/raspberry-pi-rtmp-live/"><meta name="next-head-count" content="16"><meta name="darkreader" content="disabled"><script defer="" src="https://cdnjs.baoshuo.ren/ajax/libs/react/18.1.0/umd/react.production.min.js" crossorigin=""></script><script defer="" src="https://cdnjs.baoshuo.ren/ajax/libs/react-dom/18.1.0/umd/react-dom.production.min.js" crossorigin=""></script><script defer="" nomodule="" src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/webpack-48ddc565df47d4d4.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/framework-d9a53f0451e3b9af.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/main-c7b17abe470ec1b3.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/pages/_app-ccc142e437234eb4.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/193-689698d9de7cf5a2.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/chunks/pages/post/%5Bslug%5D-14c4d4ae1b6d3407.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/cTEtOKXDdqaCcovD4CXGT/_buildManifest.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/cTEtOKXDdqaCcovD4CXGT/_ssgManifest.js" defer=""></script><script src="https://static.cdn.baoshuo.ren/blog/_next/static/cTEtOKXDdqaCcovD4CXGT/_middlewareManifest.js" defer=""></script><style>.cdfZWI:before{box-shadow:inset 0 0 32px}.zJreD:before{height:3px}.iSSyDr:before{left:1.5px}.jORRks:before{top:14px}.beaHbQ:before{width:3px}.haKUHj:after{box-sizing:border-box}.feNfPp:after{transform:translate(-50%,-50%)}.qMJeO:after{box-shadow:inset 0 0 0 2px,0 0 0 2px}.dUAgBC:after{height:27.5px}.hVfwnH:after{left:0}.jtnuen:after{top:100%}.iibzBM:after{width:27.5px}.bLLutt:before{height:.8em}.kUNXjX:before{transform:translate(0) rotate(45deg)}.kBZpXt:before{width:.8em}.kCTVgr:after{top:80%}.cDbGzW:after{left:80%}.eHPmEw:after{transform:translate(-50%,-50%) rotate(45deg)}.dmfenB:after{width:.5em}.kAVdUc{font-size:16px}.jLmWnd:before{height:100%}.jYPXoJ:before{top:0}.kKTZiz:before{left:0}.elJZFC:after{height:14px}.eLXBUo:after{width:7px}.ebtDcN:after{top:1px}.caItCN{height:2rem}.jYEAGD{align-items:stretch}.bcjLCN{flex-grow:0}.jbBqfU:before{transform:translate(-50%,-25%) rotate(45deg)}.dhOkuk:before{box-sizing:border-box}.jFCJJY:before{box-shadow:0 -.35em,0 .35em}.iqzSxf:before{transform:translate(-50%,-50%)}.bQvqKh:before{width:100%}.sKExc{right:1rem}.bjOGUo{bottom:1rem}.eSaSrN{contain:layout}.egGyMq{line-height:1}.gdPTUr{height:100%}.ipEZTh{width:95%}.eRVtDl{max-width:var(--w)}.kKplrA{contain:content}.IVbXa{justify-content:center}.dYbGIK{flex-grow:0}.gifdxR{font-size:1.25rem}.laXLGQ{color:var(--c)}.kooHYa{text-align:center}.moyUB{color:#fff}.eAOGpx{user-select:none}.bLHLvQ{text-indent:-9999px}.jXmXEB{height:1em}.hHGIsI{width:1em}.jbzBdl:before{transform:translate(-25%,-50%) rotate(-45deg)}.fIXfpL:before{width:.65em}.ergVCo:before{height:.65em}.cqyuit:before{top:50%}.hCTuXM:before{left:50%}.gvwkfp{font-size:.9em}.bRNbBj{font-weight:500}.fPWmiY{justify-content:flex-start}.hmKFEM{text-align:left}.dQPgRK{flex-grow:1}.fXzCvR{justify-content:flex-end}.klEWBS{text-align:right}.foGVKH{align-items:center}.fygwnR{box-sizing:border-box}.kQBRAp{display:block}.iMyxuR:after{display:block}.bbRNPO:after{left:1px}.imhmwA{position:fixed}.dPAasc{box-shadow:var(--s)}.jqaXfP{z-index:100}.iVncgA::-webkit-scrollbar{height:var(--s-x)}.fQhDyl::-webkit-scrollbar{width:var(--s-y)}.bBVwIW{letter-spacing:1px}.jsvbrX{cursor:pointer}.kroOag{font-size:.9rem}.bEvNbr{position:absolute}.eLDTYY{vertical-align:middle}.iRjWhb{font-size:.925rem}.QcCvg{height:12.25em}.jdKAzd{width:12.25em}.krZeLX{right:-30px}.gjJDYK{top:-40px}.dZDNG{opacity:.1}.julXB:before{content:""}.kvHVCE:before{position:absolute}.fQfkux:before{height:3.75em}.dPenaT:before{width:3.75em}.NpaJd:before{left:1.5625em}.jgAayQ:before{top:3em}.fqXcHQ:after{content:""}.dyMCpl:after{position:absolute}.chpxwD:after{height:3.75em}.beuMzX:after{width:3.75em}.dbtvqd:after{right:1.5625em}.jPcnDC:after{top:3em}.bpQkXn{font-weight:700}.gcQrEv{font-size:.9em}.iMkoWi{flex-direction:column}.chVqDG{font-size:.8em}.cypeLb{font-size:1.75rem}.VFfNK{letter-spacing:.75px}.dgIPcR{color:var(--c-m)}.fyuAJJ{color:inherit}.cjScYX{position:relative}.gSBWlu{display:flex}.kJzccJ{justify-content:space-between}.cpOcAb{display:inline-block}.kpaoc{color:var(--c-s)}.kOZsAO{word-break:keep-all}.cTiRpf:after{border-top-left-radius:100px}.kLOwRz:after{border-top-right-radius:100px}.fEOdlm:after{border-bottom-right-radius:100px}.iiCJgG:after{border-bottom-left-radius:100px}.gbJvTx:before{border-top-left-radius:100px}.eqcbDJ:before{border-top-right-radius:100px}.efWRhG:before{border-bottom-right-radius:100px}.ciQIPM:before{border-bottom-left-radius:100px}.jVKJhP:before{border-top-left-radius:1000px}.qOQRo:before{border-top-right-radius:1000px}.ftrJDm:before{border-bottom-right-radius:1000px}.dnkCBy:before{border-bottom-left-radius:1000px}.eCTYLu:after{overflow-x:hidden}.fPEpYf:after{overflow-y:hidden}.fSuxSX:after{border-top-left-radius:1000px}.diZuuN:after{border-bottom-left-radius:1000px}.ihNVbP{flex-basis:0}.KqcXP{background-color:transparent}.eIJBjz{padding-right:.7rem}.hcJOFn{padding-left:.7rem}.eGElBa{padding-top:2.5rem}.eBrwtd{padding-bottom:4rem}.edKxdA{padding-top:.9rem}.osxXp{padding-right:.9rem}.foquGP{padding-bottom:.9rem}.lhTVEC{padding-left:.9rem}.eQmaZO{padding-top:.6rem}.dZrGlq{padding-bottom:.6rem}.dvivnl{overflow-x:auto}.jSOKOm{text-decoration-line:inherit}.gCwvuy{background-color:var(--g-m)}.bKjKUN{padding-top:.75rem}.jdraHW{margin-right:auto}.eqrBPF{margin-left:auto}.lexxaO{background-color:#946ce6}.ebVilo{border-top-left-radius:.25rem}.kyhYEz{border-top-right-radius:.25rem}.jIkFRm{border-bottom-right-radius:.25rem}.gpptow{border-bottom-left-radius:.25rem}.kMKXDC{padding-top:.25rem}.ftIldC{padding-right:1rem}.jOeduE{padding-bottom:.25rem}.iDuqPI{padding-left:1rem}.kUPESX{margin-left:.5rem}.eKlQYW{flex-shrink:1}.bLlOeF{flex-basis:50%}.hwgZgR:after{background-color:currentColor}.bcfNhz{background-color:var(--g-b)}.kRQsoY{border-top-left-radius:var(--r)}.jBvrhX{border-top-right-radius:var(--r)}.dgtTIu{border-bottom-right-radius:var(--r)}.eXJtsk{border-bottom-left-radius:var(--r)}.llUCyD{overflow-y:auto}.qlVwF::-webkit-scrollbar-thumb{background-color:#b5b5b5}.jOHNtp::-webkit-scrollbar-thumb{border-top-left-radius:var(--r)}.PvULj::-webkit-scrollbar-thumb{border-top-right-radius:var(--r)}.hTxdYE::-webkit-scrollbar-thumb{border-bottom-right-radius:var(--r)}.fUqTQL::-webkit-scrollbar-thumb{border-bottom-left-radius:var(--r)}.kVZHcH{padding-top:0}.cyerGB{margin-top:.5rem}.dSxtaa{margin-right:.5rem}.ctWdVF{border-top-left-radius:50%}.jkGfDR{border-top-right-radius:50%}.bSTogt{border-bottom-right-radius:50%}.hSDpeY{border-bottom-left-radius:50%}.cDxIqC:before{border-top-left-radius:50%}.jpWidM:before{border-top-right-radius:50%}.jzdNVF:before{border-bottom-right-radius:50%}.bPkdhG:before{border-bottom-left-radius:50%}.beJoMJ:after{border-top-left-radius:50%}.iJgiCW:after{border-top-right-radius:50%}.hqUHPA:after{border-bottom-right-radius:50%}.jWWlrr:after{border-bottom-left-radius:50%}.jnGacs{background-color:var(--g-l)}.cvPkWa{padding-bottom:1.25rem}.dUvWpK{overflow-x:hidden}.hRLVFh{overflow-y:hidden}.dLUwcr{text-decoration-line:underline}.kiDYix{flex-wrap:wrap}.hriXhD{flex-shrink:0}.jjryqL{margin-right:1rem}.jTjNVR{margin-top:0}.hNjeNG{margin-bottom:0}.kpCrIt{padding-top:1.25rem}.bMSzLf{padding-right:2rem}.iATxZH{padding-bottom:0}.iigETV{padding-left:2rem}.fClzDx{margin-top:.75rem}.iKck{margin-right:0}.hlBtvm{margin-bottom:.75rem}.bmFLeF{margin-left:0}.dwawJR{padding-right:0}.jQenOz{padding-left:0}.icKiSN{padding-top:1.5rem}.fZMRmg{padding-bottom:1.5rem}.cUXNmd{margin-top:1rem}.biWxPv{margin-bottom:1rem}.bbUXPo{text-decoration-line:none}.dmKgnC{padding-top:.5rem}.cVJMrm{padding-right:.5rem}.dPFrWx{padding-bottom:.5rem}.JxWnH{padding-left:.5rem}.dAseSU:after{border-top-width:4px}.gFfWNi:after{border-right-width:4px}.hQijyr:after{border-bottom-width:4px}.cKXpgz:after{border-left-width:4px}.jxivWg:after{border-top-color:transparent}.eoMfVT:after{border-bottom-color:transparent}.iOXMHb:after{border-left-color:transparent}.dbfKrc:after{border-top-width:2px}.jAobFs{border-top-style:none}.dQbyJV{border-right-style:none}.oTbqa{border-bottom-style:none}.gwsGKP{border-left-style:none}.SeaTL:before{border-top-width:2px}.gjJuRC:before{border-right-width:0}.iWYpgm:before{border-bottom-width:0}.iHkzF:before{border-left-width:2px}.gUiFRX:before{border-top-width:0}.dixaxG:before{border-right-width:2px}.jmWgOv:before{border-bottom-width:2px}.bTanCN:before{border-left-width:0}.gMDOZu{border-top-width:1.125em}.cgEEZJ{border-right-width:1.125em}.gqWyNB{border-bottom-width:1.125em}.ktfQGr{border-left-width:1.125em}.lpnDDz:before{border-top-width:1em}.ebRqqn:before{border-right-width:1em}.bWKMJW:before{border-bottom-width:1em}.eQlDDM:before{border-left-width:1em}.kSnqYR:before{border-top-style:solid}.fgiDpI:before{border-right-style:solid}.eeAUEW:before{border-bottom-style:solid}.ecjlX:before{border-left-style:solid}.bnSwfb:before{border-right-color:transparent}.jMYtKl:after{border-top-width:1em}.blQfIT:after{border-right-width:1em}.lijgUQ:after{border-bottom-width:1em}.ccSWYO:after{border-left-width:1em}.eGyfkC:after{border-top-style:solid}.hhBXzE:after{border-right-style:solid}.iyXZtO:after{border-bottom-style:solid}.jZLyOQ:after{border-left-style:solid}.hZGkn:after{border-right-color:transparent}.FwRrA{border-top-style:solid}.cDIyHz{border-right-style:solid}.hpBjJb{border-bottom-style:solid}.ycSPk{border-left-style:solid}@media (min-width:769px){.dXUryZ{padding-top:0}.dGtUgz{padding-right:1rem}.cQUTzq{padding-bottom:0}.bjXFvo{padding-left:1rem}.jzScEz{padding-top:2.5rem}.hMoAFf{padding-right:3rem}.bccxkr{padding-bottom:4rem}.cgjdEA{padding-left:3rem}.jZOgvY{display:flex}.uUxpw{justify-content:space-between}}@media (max-width:768px){.cElyNr{flex-direction:column}.gwFLA_D{align-items:center}}.cdhcuu:hover{color:var(--c-a)}.fItHnb:hover{background-color:var(--g-n)}*,:after,:before{box-sizing:border-box}html{-moz-tab-size:4;-o-tab-size:4;tab-size:4;line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}strong{font-weight:bolder}code,pre{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}table{text-indent:0;border-color:inherit}button{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button{text-transform:none}button{-webkit-appearance:button}:root{--g:#f2f5f8;--g-m:#fff;--g-b:#fff;--g-s:#f6f7f8;--g-p:#f6f8fa;--g-c:rgba(174,184,193,.2);--g-n:rgba(67,90,111,.06);--g-t:#fff;--g-l:#f5f5f5;--g-i:#fff;--g-r:hsla(200,5%,89%,.5);--c:#2f3d4e;--c-a:#0969da;--c-s:#57606a;--c-m:#6f767d;--h6:#57606b;--b:#d8dee4;--b-t:#d0d7de;--r:0.5rem;--s-y:0.5rem;--s-x:0.35rem;--w:1000px;--s:0 4px 10px rgba(0,2,4,.06),0 0 1px rgba(0,2,4,.11);--i:0}@media(max-width:768px){:root{--s-y:0.35rem;--s-x:0.28rem}}@media(prefers-color-scheme:dark){:root:not(.light){color-scheme:dark;--g:#121212;--g-m:#21262d;--g-b:#364151;--g-s:#2f3542;--g-p:#161b22;--g-c:hsla(215,8%,47%,.4);--g-n:#3e4b5e;--g-t:#2f3542;--g-l:#2c343c;--g-i:#3b3b3b;--g-r:rgba(51,61,77,.5);--c:#c9d1d9;--c-a:#58a6ff;--c-s:#8b949e;--c-m:hsla(0,0%,100%,.659);--h6:#8b949e;--b:#757575;--b-t:#5f5f5f;--s:none;--i:1}:root:not(.light) img{filter:brightness(.8)}}body{line-height:1.5;background:var(--g);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,PingFang SC,Hiragino Sans GB,Source Han Sans SC,Noto Sans CJK SC,Microsoft YaHei,WenQuanYi Micro Hei,WenQuanYi Zen Hei,Helvetica Neue,Arial,sans-serif;color:var(--c);overflow-y:scroll}#__next{display:flex;flex-direction:column;justify-content:space-between;min-height:100vh}*{transition:background-color .25s ease-in-out}a{color:var(--c-a);text-decoration:none}.dot{margin:0 .4rem}.dot:after{content:"·"}#post_markdown__nRdJ1{line-height:1.5;word-wrap:break-word}#post_markdown__nRdJ1>:first-child{margin-top:0!important}#post_markdown__nRdJ1>:last-child{margin-bottom:0!important}#post_markdown__nRdJ1 a{color:var(--c-a);-webkit-text-decoration:underline transparent;text-decoration:underline transparent;text-underline-position:under;transition:-webkit-text-decoration-color 75ms ease-in-out;transition:text-decoration-color 75ms ease-in-out;transition:text-decoration-color 75ms ease-in-out,-webkit-text-decoration-color 75ms ease-in-out}#post_markdown__nRdJ1 a:active,#post_markdown__nRdJ1 a:hover{outline-width:0}#post_markdown__nRdJ1 a:hover{-webkit-text-decoration:underline var(--c-a);text-decoration:underline var(--c-a)}#post_markdown__nRdJ1 strong{font-weight:700}#post_markdown__nRdJ1 img{border-style:none;max-width:100%;box-sizing:content-box}#post_markdown__nRdJ1 table{border-spacing:0;border-collapse:collapse;display:block;width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:100%;overflow:auto}#post_markdown__nRdJ1 table th{font-weight:700}#post_markdown__nRdJ1 table td,#post_markdown__nRdJ1 table th{padding:.375rem .8125rem;border:1px solid var(--b-t)}#post_markdown__nRdJ1 table tr{background-color:var(--g-m);border-top:1px solid var(--b)}#post_markdown__nRdJ1 table th,#post_markdown__nRdJ1 table tr:nth-child(2n){background-color:var(--g-p)}#post_markdown__nRdJ1 h2{margin-top:1.5rem;margin-bottom:1rem;font-weight:700;line-height:1.25}#post_markdown__nRdJ1 h2{font-size:1.5em}#post_markdown__nRdJ1 p{margin-top:0;margin-bottom:.625rem}#post_markdown__nRdJ1 ol{margin-top:0;margin-bottom:0;padding-left:2em}#post_markdown__nRdJ1 code{font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:.75em;margin:0;padding:.2em .4em;background-color:var(--g-c);border-radius:6px}#post_markdown__nRdJ1 pre{padding:1rem;overflow:auto;font-size:.85em;line-height:1.45;background-color:var(--g-p);border-radius:6px;word-wrap:normal}#post_markdown__nRdJ1 pre::-webkit-scrollbar{height:var(--s-x);width:var(--s-y)}#post_markdown__nRdJ1 pre::-webkit-scrollbar-thumb{background:#b5b5b5;border-radius:var(--r)}#post_markdown__nRdJ1 pre code{font-size:100%;display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background:transparent;border:0}#post_markdown__nRdJ1 ol,#post_markdown__nRdJ1 p,#post_markdown__nRdJ1 pre,#post_markdown__nRdJ1 table{margin-top:0;margin-bottom:1rem}#post_markdown__nRdJ1 .hljs-keyword,#post_markdown__nRdJ1 .hljs-variable.language_{color:#d73a49}#post_markdown__nRdJ1 .hljs-title,#post_markdown__nRdJ1 .hljs-title.class_,#post_markdown__nRdJ1 .hljs-title.function_{color:#6f42c1}#post_markdown__nRdJ1 .hljs-attr,#post_markdown__nRdJ1 .hljs-attribute,#post_markdown__nRdJ1 .hljs-literal,#post_markdown__nRdJ1 .hljs-meta,#post_markdown__nRdJ1 .hljs-number,#post_markdown__nRdJ1 .hljs-variable{color:#005cc5}#post_markdown__nRdJ1 .hljs-string{color:#032f62}#post_markdown__nRdJ1 .hljs-comment{color:#6a737d}#post_markdown__nRdJ1 .hljs-name{color:#22863a}#post_markdown__nRdJ1 .hljs-section{color:#005cc5;font-weight:700}#post_markdown__nRdJ1 .hljs-addition{color:#22863a;background-color:#f0fff4}</style><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/1b5fe6ad031da0e7.css" data-n-g="" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/1b5fe6ad031da0e7.css"></noscript><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/abeb2dbb5e85e743.css" data-n-g="" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/abeb2dbb5e85e743.css"></noscript><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/49e3c9be9aebdd02.css" data-n-p="" media="print" onload="this.media='all'"><noscript><link rel="stylesheet" href="https://static.cdn.baoshuo.ren/blog/_next/static/css/49e3c9be9aebdd02.css"></noscript><noscript data-n-css=""></noscript></head><body><div id="__next"><style>
      #nprogress {
        pointer-events: none;
      }
      #nprogress .bar {
        background: #29D;
        position: fixed;
        z-index: 9999;
        top: 0;
        left: 0;
        width: 100%;
        height: 3px;
      }
      #nprogress .peg {
        display: block;
        position: absolute;
        right: 0px;
        width: 100px;
        height: 100%;
        box-shadow: 0 0 10px #29D, 0 0 5px #29D;
        opacity: 1;
        -webkit-transform: rotate(3deg) translate(0px, -4px);
        -ms-transform: rotate(3deg) translate(0px, -4px);
        transform: rotate(3deg) translate(0px, -4px);
      }
      #nprogress .spinner {
        display: block;
        position: fixed;
        z-index: 1031;
        top: 15px;
        right: 15px;
      }
      #nprogress .spinner-icon {
        width: 18px;
        height: 18px;
        box-sizing: border-box;
        border: solid 2px transparent;
        border-top-color: #29D;
        border-left-color: #29D;
        border-radius: 50%;
        -webkit-animation: nprogresss-spinner 400ms linear infinite;
        animation: nprogress-spinner 400ms linear infinite;
      }
      .nprogress-custom-parent {
        overflow: hidden;
        position: relative;
      }
      .nprogress-custom-parent #nprogress .spinner,
      .nprogress-custom-parent #nprogress .bar {
        position: absolute;
      }
      @-webkit-keyframes nprogress-spinner {
        0% {
          -webkit-transform: rotate(0deg);
        }
        100% {
          -webkit-transform: rotate(360deg);
        }
      }
      @keyframes nprogress-spinner {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style><div><nav class="gSBWlu kJzccJ gCwvuy eAOGpx dPAasc eSaSrN cjScYX jqaXfP cElyNr gwFLA_D dXUryZ dGtUgz cQUTzq bjXFvo " role="navigation"><a class="gSBWlu bcjLCN hriXhD foGVKH gifdxR bpQkXn fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn bBVwIW " href="/"><svg id="Main" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="caItCN dSxtaa "><path d="M471,256A214.8122,214.8122,0,0,1,256,471a216.4337,216.4337,0,0,1-40.955-3.896A214.86,214.86,0,0,1,41,256,214.9809,214.9809,0,0,1,256,41a214.4584,214.4584,0,0,1,154.4137,65.4129q6.911,7.1214,13.146,14.8661c1.3337,1.6587,2.6413,3.3258,3.9229,5.0281A214.5854,214.5854,0,0,1,471,256Z" fill="#5897d1"></path><path d="M419.2572,204.2572A163.1145,163.1145,0,0,1,256,367.5136a164.3664,164.3664,0,0,1-31.0985-2.9579A163.271,163.271,0,1,1,419.2572,204.2572Z" fill="#9fc5e6"></path><path d="M418.8558,63.0971v44.65A10.5833,10.5833,0,0,1,408.2729,118.33H333.7074V52.5134h74.5655A10.584,10.584,0,0,1,418.8558,63.0971Z" fill="#ff668c"></path><path d="M329.7492,458.0118A215.2574,215.2574,0,0,1,60.2534,345.0537l67.6679-90.0019a30.79,30.79,0,0,1,49.2216,0l38.5328,51.2574Z" fill="#343a6e"></path><path d="M408.6937,77.1989a8.2229,8.2229,0,0,1-8.2229,8.223H371.8716a8.2271,8.2271,0,0,0,0,16.4542h9.8724a8.2271,8.2271,0,1,1,0,16.4542H333.7065V52.5134h46.87a8.2238,8.2238,0,0,1,8.2229,8.2313,8.2246,8.2246,0,0,0,8.2313,8.2229h3.44A8.23,8.23,0,0,1,408.6937,77.1989Z" fill="#ef487d"></path><path d="M328.6658,41.0008h0a7.2391,7.2391,0,0,0-7.2394,7.24V230.2126h14.4789V48.24A7.24,7.24,0,0,0,328.6658,41.0008Z" fill="#f9df73"></path><path d="M454.3619,339.0513q-2.87,6.8317-6.1872,13.4266A215.3468,215.3468,0,0,1,215.045,467.104a214.1378,214.1378,0,0,1-82.1653-34.83L299.2368,211.0171a36.8115,36.8115,0,0,1,58.8571,0Z" fill="#484b7f"></path><path d="M328.67,196.3173c-5.6429,0-11.285,4.8972-15.0584,14.699L215.045,467.104a213.7775,213.7775,0,0,1-82.1653-34.83L299.2461,211.0171A36.578,36.578,0,0,1,328.67,196.3173Z" fill="#343a6e"></path><path d="M448.1747,352.4779A215.3468,215.3468,0,0,1,215.045,467.104a213.4209,213.4209,0,0,1-59.4366-20.9382L264.82,337.7974c-17.0068,44.185,31.1885,55.6372,81.2087,37.2085C391.9237,358.0939,396.8116,340.0692,448.1747,352.4779Z" fill="#343a6e"></path><path d="M215.6766,306.31c-25.6245.886-50.9072,16.0419-67.0884,16.0419-25.0106,0-54.584-22.1845-20.6661-67.2992a30.79,30.79,0,0,1,49.2216,0Z" fill="#484b7f"></path></svg><span>宝硕博客</span></a><div class="gSBWlu jYEAGD dvivnl iVncgA fQhDyl qlVwF jOHNtp PvULj hTxdYE fUqTQL "><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/">首页</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/archives/">归档</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/categories/">分类</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/tags/">标签</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/friends/">友链</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/about/">关于</a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/atom.xml"><i class="cpOcAb cjScYX hHGIsI jXmXEB bLHLvQ eLDTYY kAVdUc dUvWpK hRLVFh julXB dhOkuk kvHVCE gbJvTx eqcbDJ efWRhG ciQIPM iqzSxf cdfZWI zJreD iSSyDr jORRks beaHbQ fqXcHQ haKUHj dyMCpl cTiRpf kLOwRz fEOdlm iiCJgG feNfPp dAseSU gFfWNi hQijyr cKXpgz eGyfkC hhBXzE iyXZtO jZLyOQ jxivWg hZGkn eoMfVT iOXMHb qMJeO dUAgBC hVfwnH jtnuen iibzBM "></i></a><a class="gSBWlu bcjLCN hriXhD foGVKH fyuAJJ bbUXPo eQmaZO eIJBjz dZrGlq hcJOFn fItHnb " href="/search/"><i class="fygwnR cpOcAb kAVdUc jXmXEB hHGIsI cjScYX bLHLvQ eLDTYY julXB kvHVCE SeaTL dixaxG jmWgOv iHkzF kSnqYR fgiDpI eeAUEW ecjlX gbJvTx eqcbDJ efWRhG ciQIPM bLLutt kKTZiz jYPXoJ kUNXjX kBZpXt fqXcHQ dyMCpl dbfKrc eGyfkC kCTVgr cDbGzW eHPmEw dmfenB "></i></a><div class="dYbGIK eKlQYW ihNVbP "><button class="jsvbrX gdPTUr gSBWlu foGVKH IVbXa eQmaZO eIJBjz dZrGlq hcJOFn jAobFs dQbyJV oTbqa gwsGKP KqcXP fItHnb "><i class="cpOcAb kAVdUc jXmXEB hHGIsI cjScYX bLHLvQ eLDTYY julXB kvHVCE bQvqKh jLmWnd SeaTL dixaxG jmWgOv iHkzF kSnqYR fgiDpI eeAUEW ecjlX jVKJhP qOQRo ftrJDm dnkCBy jYPXoJ kKTZiz fqXcHQ dyMCpl iMyxuR hwgZgR eCTYLu fPEpYf fSuxSX diZuuN elJZFC eLXBUo ebtDcN bbRNPO "></i></button></div></div></nav><main><article class="gCwvuy kRQsoY jBvrhX dgtTIu eXJtsk dvivnl llUCyD dPAasc ipEZTh eRVtDl cUXNmd jdraHW biWxPv eqrBPF"><header class="jTjNVR iKck hNjeNG bmFLeF kpCrIt bMSzLf iATxZH iigETV "><h1 class="fClzDx iKck hlBtvm bmFLeF cypeLb VFfNK ">使用树莓派+Nginx搭建 Rtmp 直播服务</h1><div class="dmKgnC dwawJR dPFrWx jQenOz dgIPcR "><time datetime="2020-10-05T13:35:32.000Z">2020-10-05</time><span class="dot"></span><a class="fyuAJJ bbUXPo cdhcuu " href="/categories/%E6%8A%80%E6%9C%AF%E5%90%91/">技术向</a><span class="dot"></span><span>992 字</span></div></header><section class="jTjNVR iKck hNjeNG bmFLeF bKjKUN bMSzLf fZMRmg iigETV kKplrA " id="post_markdown__nRdJ1"><p>国庆在家闲着没啥事，把一直在角落里吃灰的树莓派 4B 拿出来捣鼓了几下。<!-- --></p><span id="more"></span><p>使用 nginx 模块：<!-- --><a href="https://github.com/arut/nginx-rtmp-module" rel="external nofollow noreferrer"><code>nginx-rtmp-module<!-- --></code></a></p><h2 id="安装-nginx-nginx-rtmp-module">安装 nginx &amp; nginx-rtmp-module<!-- --></h2><p>apt, yes!<!-- --></p><pre><code class="hljs bash">apt update
apt upgrade -y
apt install nginx libnginx-mod-rtmp -y<!-- --></code></pre><p>访问服务器 IP ，出现如下图所示网页即代表安装成功。<!-- --></p><p><img src="https://s1.baoshuo.ren/2020/11/26/BdKOhDuxIaYks6q.png" alt="" loading="lazy"></p><h2 id="修改-nginx-配置">修改 nginx 配置<!-- --></h2><p>打开 <!-- --><code>/etc/nginx/nginx.conf<!-- --></code> ，在末尾处插入下面的配置<!-- --></p><pre><code class="hljs nginx"><span class="hljs-section">rtmp<!-- --></span> {
    <!-- --><span class="hljs-section">server<!-- --></span> {
        <!-- --><span class="hljs-attribute">listen<!-- --></span>     <!-- --><span class="hljs-number">1935<!-- --></span>;              <!-- --><span class="hljs-comment"># 服务端口<!-- --></span>
        <!-- --><span class="hljs-attribute">chunk_size<!-- --></span> <!-- --><span class="hljs-number">4096<!-- --></span>;              <!-- --><span class="hljs-comment"># 数据传输块的大小<!-- --></span>

        <!-- --><span class="hljs-attribute">application<!-- --></span> vod {
            <!-- --><span class="hljs-attribute">play<!-- --></span> /opt/video;          <!-- --><span class="hljs-comment"># 视频文件存放位置。<!-- --></span>
        }

        <!-- --><span class="hljs-attribute">application<!-- --></span> rtmplive {
            <!-- --><span class="hljs-attribute">live<!-- --></span>            <!-- --><span class="hljs-literal">on<!-- --></span>;        <!-- --><span class="hljs-comment"># 开启直播<!-- --></span>
            <!-- --><span class="hljs-attribute">max_connections<!-- --></span> <!-- --><span class="hljs-number">64<!-- --></span>;        <!-- --><span class="hljs-comment"># 为 rtmp 引擎设置最大连接数。默认为 off<!-- --></span>
        }

        <!-- --><span class="hljs-attribute">application<!-- --></span> live {
            <!-- --><span class="hljs-attribute">live<!-- --></span>                <!-- --><span class="hljs-literal">on<!-- --></span>;              <!-- --><span class="hljs-comment"># 开启直播<!-- --></span>
            <!-- --><span class="hljs-attribute">hls<!-- --></span>                 <!-- --><span class="hljs-literal">on<!-- --></span>;              <!-- --><span class="hljs-comment"># 这个参数把直播服务器改造成实时回放服务器。<!-- --></span>
            <!-- --><span class="hljs-attribute">wait_key<!-- --></span>            <!-- --><span class="hljs-literal">on<!-- --></span>;              <!-- --><span class="hljs-comment"># 对视频切片进行保护，这样就不会产生马赛克了。<!-- --></span>
            <!-- --><span class="hljs-attribute">hls_path<!-- --></span>            /opt/video/hls;  <!-- --><span class="hljs-comment"># 切片视频文件存放位置。<!-- --></span>
            <!-- --><span class="hljs-attribute">hls_fragment<!-- --></span>        <!-- --><span class="hljs-number">10s<!-- --></span>;             <!-- --><span class="hljs-comment"># 设置HLS片段长度。<!-- --></span>
            <!-- --><span class="hljs-attribute">hls_max_fragment<!-- --></span>    <!-- --><span class="hljs-number">10s<!-- --></span>;             <!-- --><span class="hljs-comment"># 设置HLS片段最大长度。<!-- --></span>
            <!-- --><span class="hljs-attribute">hls_playlist_length<!-- --></span> <!-- --><span class="hljs-number">30s<!-- --></span>;             <!-- --><span class="hljs-comment"># 设置HLS播放列表长度。<!-- --></span>
            <!-- --><span class="hljs-attribute">hls_continuous<!-- --></span>      <!-- --><span class="hljs-literal">on<!-- --></span>;              <!-- --><span class="hljs-comment"># 连续模式。<!-- --></span>
            <!-- --><span class="hljs-attribute">hls_cleanup<!-- --></span>         <!-- --><span class="hljs-literal">on<!-- --></span>;              <!-- --><span class="hljs-comment"># 对多余的切片进行删除。<!-- --></span>
            <!-- --><span class="hljs-attribute">hls_nested<!-- --></span>          <!-- --><span class="hljs-literal">on<!-- --></span>;              <!-- --><span class="hljs-comment"># 嵌套模式。<!-- --></span>
        }
    }
}<!-- --></code></pre><p>打开默认站点配置文件 <!-- --><code>/etc/nginx/sites-available/default<!-- --></code> ，在 <!-- --><code>server<!-- --></code> 部分的末尾添加以下内容<!-- --></p><pre><code class="hljs nginx"><span class="hljs-section">location<!-- --></span> /live {
    <!-- --><span class="hljs-section">types<!-- --></span> {
        application/vnd.apple.<!-- --><span class="hljs-attribute">mpegurl<!-- --></span> m3u8;
        video/<!-- --><span class="hljs-attribute">mp2t<!-- --></span>                    ts;
    }

    <!-- --><span class="hljs-attribute">autoindex<!-- --></span> <!-- --><span class="hljs-literal">on<!-- --></span>;
    <!-- --><span class="hljs-attribute">alias<!-- --></span>     /opt/video/hls;

    <!-- --><span class="hljs-attribute">expires<!-- --></span> -<!-- --><span class="hljs-number">1<!-- --></span>;

    <!-- --><span class="hljs-attribute">add_header<!-- --></span> <!-- --><span class="hljs-string">'Cache-Control'<!-- --></span>                    <!-- --><span class="hljs-string">'no-cache'<!-- --></span>;
    <!-- --><span class="hljs-attribute">add_header<!-- --></span> <!-- --><span class="hljs-string">'Access-Control-Allow-Origin'<!-- --></span>      <!-- --><span class="hljs-string">'*'<!-- --></span>;
    <!-- --><span class="hljs-attribute">add_header<!-- --></span> <!-- --><span class="hljs-string">'Access-Control-Allow-Credentials'<!-- --></span> <!-- --><span class="hljs-string">'true'<!-- --></span>;
    <!-- --><span class="hljs-attribute">add_header<!-- --></span> <!-- --><span class="hljs-string">'Access-Control-Allow-Methods'<!-- --></span>     <!-- --><span class="hljs-string">'GET, POST, OPTIONS'<!-- --></span>;
    <!-- --><span class="hljs-attribute">add_header<!-- --></span> <!-- --><span class="hljs-string">'Access-Control-Allow-Headers'<!-- --></span>     <!-- --><span class="hljs-string">'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type'<!-- --></span>;
}
<!-- --><span class="hljs-section">location<!-- --></span> /stat {
    <!-- --><span class="hljs-attribute">rtmp_stat<!-- --></span> all;
    <!-- --><span class="hljs-comment"># rtmp_stat_stylesheet stat.xsl;<!-- --></span>
}<!-- --></code></pre><p>插入完以后配置文件会变成下面的样子<!-- --></p><pre><code class="hljs diff"><span class="hljs-comment">--- /etc/nginx/sites-available/default<!-- --></span>
<!-- --><span class="hljs-comment">+++ /etc/nginx/sites-available/default<!-- --></span>
<!-- --><span class="hljs-meta">@@ -1,14 +1,36 @@<!-- --></span>
 server {
     listen 80 default_server;
     listen [::]:80 default_server;

     root /var/www/html;

     index index.html index.htm index.nginx-debian.html;

     server_name _;

     location / {
         try_files $uri $uri/ =404;
     }
<!-- --><span class="hljs-addition">+<!-- --></span>
<!-- --><span class="hljs-addition">+    location /live {<!-- --></span>
<!-- --><span class="hljs-addition">+        types {<!-- --></span>
<!-- --><span class="hljs-addition">+            application/vnd.apple.mpegurl m3u8;<!-- --></span>
<!-- --><span class="hljs-addition">+            video/mp2t                    ts;<!-- --></span>
<!-- --><span class="hljs-addition">+        }<!-- --></span>
<!-- --><span class="hljs-addition">+<!-- --></span>
<!-- --><span class="hljs-addition">+        autoindex on;<!-- --></span>
<!-- --><span class="hljs-addition">+        alias     /opt/video/hls;<!-- --></span>
<!-- --><span class="hljs-addition">+<!-- --></span>
<!-- --><span class="hljs-addition">+        expires -1;<!-- --></span>
<!-- --><span class="hljs-addition">+<!-- --></span>
<!-- --><span class="hljs-addition">+        add_header 'Cache-Control'                    'no-cache';<!-- --></span>
<!-- --><span class="hljs-addition">+        add_header 'Access-Control-Allow-Origin'      '*';<!-- --></span>
<!-- --><span class="hljs-addition">+        add_header 'Access-Control-Allow-Credentials' 'true';<!-- --></span>
<!-- --><span class="hljs-addition">+        add_header 'Access-Control-Allow-Methods'     'GET, POST, OPTIONS';<!-- --></span>
<!-- --><span class="hljs-addition">+        add_header 'Access-Control-Allow-Headers'     'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';<!-- --></span>
<!-- --><span class="hljs-addition">+    }<!-- --></span>
<!-- --><span class="hljs-addition">+    location /stat {<!-- --></span>
<!-- --><span class="hljs-addition">+        rtmp_stat all;<!-- --></span>
<!-- --><span class="hljs-addition">+        # rtmp_stat_stylesheet stat.xsl;<!-- --></span>
<!-- --><span class="hljs-addition">+    }<!-- --></span>
 }<!-- --></code></pre><p>修改完成后使用 <!-- --><code>nginx -t<!-- --></code> 测试配置文件是否正确<!-- --></p><pre><code class="hljs vim">nginx: the configuration <!-- --><span class="hljs-keyword">file<!-- --></span> /etc/nginx/nginx.<!-- --><span class="hljs-keyword">conf<!-- --></span> <!-- --><span class="hljs-keyword">syntax<!-- --></span> <!-- --><span class="hljs-keyword">is<!-- --></span> ok
nginx: configuration <!-- --><span class="hljs-keyword">file<!-- --></span> /etc/nginx/nginx.<!-- --><span class="hljs-keyword">conf<!-- --></span> test <!-- --><span class="hljs-keyword">is<!-- --></span> successful<!-- --></code></pre><p>当出现成功提示时，使用 <!-- --><code>nginx -s reload<!-- --></code> 平滑重启 nginx。<!-- --></p><p>重启成功后使用 <!-- --><code>netstat -lnp<!-- --></code> 查看 <!-- --><code>tcp/1935<!-- --></code> 端口是否开启。<!-- --></p><p><img src="https://s1.baoshuo.ren/2020/11/26/Xy3Nq5WZaogLIvR.png" alt="" loading="lazy"></p><h2 id="使用-obs-连接直播服务器">使用 OBS 连接直播服务器<!-- --></h2><p>打开 OBS ，在 设置 -&gt; 推流 中配置以下内容<!-- --></p><table><thead><tr><th>项目<!-- --></th><th>值<!-- --></th></tr></thead><tbody><tr><td>服务<!-- --></td><td><code>自定义...<!-- --></code></td></tr><tr><td>服务器<!-- --></td><td><code>rtmp://${ip}/live<!-- --></code></td></tr><tr><td>串流密钥<!-- --></td><td><code>${key}<!-- --></code></td></tr></tbody></table><p>其中，<!-- --><code>${ip}<!-- --></code> 和 <!-- --><code>${key}<!-- --></code> 设置为你需要的值即可。<!-- --></p><p>回到主界面，点击 <!-- --><strong>开始推流<!-- --></strong> 进行推流。<!-- --></p><h2 id="使用客户端拉取直播流">使用客户端拉取直播流<!-- --></h2><p><img src="https://s1.baoshuo.ren/2020/11/26/jpqVTAgXSW6oyEP.png" alt="" loading="lazy"></p><p>在 <!-- --><code>PotPlayer<!-- --></code> <!-- --><code>QQ影音<!-- --></code> 等播放器中选择 <!-- --><code>打开-&gt;打开URL<!-- --></code> 。<!-- --></p><p><img src="https://s1.baoshuo.ren/2020/11/26/rzBNukVTntf5xUR.png" alt="" loading="lazy"></p><p>输入 <!-- --><code>http://${ip}/live/${key}/index.m3u8<!-- --></code> ，点击确定。<!-- --></p><p><img src="https://s1.baoshuo.ren/2020/11/26/crbEBQNC3qH8uOl.jpg" alt="" loading="lazy"></p><p>此时可以就看到直播画面了。<!-- --></p><h2 id="网页端播放">网页端播放<!-- --></h2><p>页面中只有一个播放器，其他功能请自行实现。<!-- --></p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">html<!-- --></span>&gt;<!-- --></span>

<!-- --><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">head<!-- --></span>&gt;<!-- --></span>
    <!-- --><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">title<!-- --></span>&gt;<!-- --></span>Live Player<!-- --><span class="hljs-tag">&lt;/<!-- --><span class="hljs-name">title<!-- --></span>&gt;<!-- --></span>
    <!-- --><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">meta<!-- --></span> <!-- --><span class="hljs-attr">charset<!-- --></span>=<!-- --><span class="hljs-string">"UTF-8"<!-- --></span>&gt;<!-- --></span>
<!-- --><span class="hljs-tag">&lt;/<!-- --><span class="hljs-name">head<!-- --></span>&gt;<!-- --></span>

<!-- --><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">body<!-- --></span>&gt;<!-- --></span>
    <!-- --><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">div<!-- --></span> <!-- --><span class="hljs-attr">id<!-- --></span>=<!-- --><span class="hljs-string">"dplayer"<!-- --></span>&gt;<!-- --></span><span class="hljs-tag">&lt;/<!-- --><span class="hljs-name">div<!-- --></span>&gt;<!-- --></span>
    <!-- --><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">script<!-- --></span> <!-- --><span class="hljs-attr">src<!-- --></span>=<!-- --><span class="hljs-string">"https://cdn.jsdelivr.net/npm/hls.js@0.14.13/dist/hls.min.js"<!-- --></span>&gt;<!-- --></span><span class="hljs-tag">&lt;/<!-- --><span class="hljs-name">script<!-- --></span>&gt;<!-- --></span>
    <!-- --><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">script<!-- --></span> <!-- --><span class="hljs-attr">src<!-- --></span>=<!-- --><span class="hljs-string">"https://cdn.jsdelivr.net/npm/dplayer@1.26.0/dist/DPlayer.min.js"<!-- --></span>&gt;<!-- --></span><span class="hljs-tag">&lt;/<!-- --><span class="hljs-name">script<!-- --></span>&gt;<!-- --></span>
    <!-- --><span class="hljs-tag">&lt;<!-- --><span class="hljs-name">script<!-- --></span>&gt;<!-- --></span><span class="language-javascript"></span>
<!-- --><span class="language-javascript">        <!-- --><span class="hljs-keyword">const<!-- --></span> dp = <!-- --><span class="hljs-keyword">new<!-- --></span> <!-- --><span class="hljs-title class_">DPlayer<!-- --></span>({<!-- --></span>
<!-- --><span class="language-javascript">            <!-- --><span class="hljs-attr">container<!-- --></span>: <!-- --><span class="hljs-variable language_">document<!-- --></span>.<!-- --><span class="hljs-title function_">getElementById<!-- --></span>(<!-- --><span class="hljs-string">'dplayer'<!-- --></span>),<!-- --></span>
<!-- --><span class="language-javascript">            <!-- --><span class="hljs-attr">live<!-- --></span>: <!-- --><span class="hljs-literal">true<!-- --></span>,<!-- --></span>
<!-- --><span class="language-javascript">            <!-- --><span class="hljs-attr">video<!-- --></span>: {<!-- --></span>
<!-- --><span class="language-javascript">                <!-- --><span class="hljs-attr">url<!-- --></span>: <!-- --><span class="hljs-string">'http://${ip}/live/${key}/index.m3u8'<!-- --></span>,<!-- --></span>
<!-- --><span class="language-javascript">                <!-- --><span class="hljs-attr">type<!-- --></span>: <!-- --><span class="hljs-string">'hls'<!-- --></span>,<!-- --></span>
<!-- --><span class="language-javascript">            },<!-- --></span>
<!-- --><span class="language-javascript">        });<!-- --></span>
<!-- --><span class="language-javascript">    <!-- --></span><span class="hljs-tag">&lt;/<!-- --><span class="hljs-name">script<!-- --></span>&gt;<!-- --></span>
<!-- --><span class="hljs-tag">&lt;/<!-- --><span class="hljs-name">body<!-- --></span>&gt;<!-- --></span>

<!-- --><span class="hljs-tag">&lt;/<!-- --><span class="hljs-name">html<!-- --></span>&gt;<!-- --></span></code></pre><p><img src="https://s1.baoshuo.ren/2020/11/26/9X6mUtF4fLzdaYn.jpg" alt="" loading="lazy"></p><h2 id="后记-5">后记<!-- --></h2><p>如果没有在外直播的需求，不要将 rtmp 端口映射至公网，这可能会带来一些不必要的麻烦。<!-- --></p><h2 id="参考资料-11">参考资料<!-- --></h2><ol><li><a href="https://github.com/arut/nginx-rtmp-module" rel="external nofollow noreferrer">NGINX-based Media Streaming Server<!-- --></a></li></ol></section><div class="cjScYX jnGacs kpCrIt bMSzLf cvPkWa iigETV dUvWpK hRLVFh "><div class="bpQkXn ">使用树莓派+Nginx搭建 Rtmp 直播服务</div><div><a class="kpaoc dLUwcr gcQrEv cdhcuu " href="/post/raspberry-pi-rtmp-live/">https://blog.baoshuo.ren/post/raspberry-pi-rtmp-live/</a></div><div class="gSBWlu kiDYix cUXNmd "><div class="gSBWlu iMkoWi hriXhD jjryqL biWxPv "><div class="chVqDG ">本文作者</div><div><a class="fyuAJJ bbUXPo cdhcuu " href="https://baoshuo.ren" target="_blank">宝硕</a></div></div><div class="gSBWlu iMkoWi hriXhD jjryqL biWxPv "><div class="chVqDG ">发布于</div><time datetime="2020-10-05T13:35:32.000Z">2020-10-05</time></div><div class="gSBWlu iMkoWi hriXhD jjryqL biWxPv "><div class="chVqDG ">版权协议</div><div><a class="fyuAJJ bbUXPo cdhcuu " href="https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.zh-Hans" target="_blank" rel="license noopener noreferrer">CC BY-NC-SA 4.0</a></div></div></div><div class="chVqDG ">转载或引用本文时请遵守许可协议，注明出处、不得用于商业用途！</div><i class="cpOcAb bEvNbr eLDTYY iRjWhb QcCvg jdKAzd krZeLX gjJDYK dZDNG gMDOZu cgEEZJ gqWyNB ktfQGr FwRrA cDIyHz hpBjJb ycSPk ctWdVF jkGfDR bSTogt hSDpeY julXB kvHVCE lpnDDz ebRqqn bWKMJW eQlDDM kSnqYR fgiDpI eeAUEW ecjlX cDxIqC jpWidM jzdNVF bPkdhG bnSwfb fQfkux dPenaT NpaJd jgAayQ fqXcHQ dyMCpl jMYtKl blQfIT lijgUQ ccSWYO eGyfkC hhBXzE iyXZtO jZLyOQ beJoMJ iJgiCW hqUHPA jWWlrr hZGkn chpxwD beuMzX dbtvqd jPcnDC "></i></div><div class="kroOag icKiSN bMSzLf fZMRmg iigETV "><a class="kpaoc bbUXPo dSxtaa cdhcuu " href="/tags/%E6%8A%98%E8%85%BE/"># <!-- -->折腾<!-- --></a></div></article><div class="gCwvuy kRQsoY jBvrhX dgtTIu eXJtsk dvivnl llUCyD dPAasc icKiSN bMSzLf fZMRmg iigETV ipEZTh eRVtDl cUXNmd jdraHW biWxPv eqrBPF kooHYa kroOag"><div>喜欢这篇文章？为什么不考虑打赏一下作者呢？</div><a class="cyerGB moyUB lexxaO ebVilo kyhYEz jIkFRm gpptow bbUXPo kMKXDC ftIldC jOeduE iDuqPI cpOcAb eAOGpx " href="https://afdian.net/@baoshuo" target="_blank" rel="noopener noreferrer">爱发电</a></div><div class="gSBWlu ipEZTh eRVtDl cUXNmd jdraHW biWxPv eqrBPF gvwkfp bRNbBj"><div class="gSBWlu dQPgRK eKlQYW bLlOeF fPWmiY hmKFEM "><a class="gSBWlu foGVKH dgIPcR kVZHcH cVJMrm iATxZH JxWnH " href="/post/bilibili-1024-ctf-write-up/"><i class="dSxtaa bLHLvQ eLDTYY cjScYX cpOcAb jXmXEB hHGIsI julXB kvHVCE jbzBdl SeaTL gjJuRC iWYpgm iHkzF kSnqYR fgiDpI eeAUEW ecjlX fIXfpL ergVCo cqyuit hCTuXM "></i>Bilibili 1024 节 CTF Write Up<!-- --></a></div><div class="gSBWlu dQPgRK eKlQYW bLlOeF fXzCvR klEWBS "><a class="gSBWlu foGVKH dgIPcR kVZHcH cVJMrm iATxZH JxWnH " href="/post/tencent-cloud-cvm-dual-ip/">给腾讯云服务器免费增加第二个 IP<!-- --><i class="kUPESX bLHLvQ eLDTYY cjScYX cpOcAb jXmXEB hHGIsI julXB kvHVCE jbzBdl gUiFRX dixaxG jmWgOv bTanCN kSnqYR fgiDpI eeAUEW ecjlX fIXfpL ergVCo cqyuit hCTuXM "></i></a></div></div><div></div></main></div><div class="imhmwA sKExc bjOGUo eSaSrN "><div class="fyuAJJ kQBRAp bcfNhz edKxdA osxXp foquGP lhTVEC kRQsoY jBvrhX dgtTIu eXJtsk cyerGB egGyMq jsvbrX dPAasc "><i class="cpOcAb cjScYX hHGIsI jXmXEB bLHLvQ eLDTYY dhOkuk julXB hCTuXM cqyuit kvHVCE SeaTL kSnqYR jFCJJY iqzSxf bQvqKh "></i></div><a class="fyuAJJ kQBRAp bcfNhz edKxdA osxXp foquGP lhTVEC kRQsoY jBvrhX dgtTIu eXJtsk cyerGB egGyMq jsvbrX dPAasc " href="#"><i class="cpOcAb cjScYX hHGIsI jXmXEB bLHLvQ eLDTYY dhOkuk julXB hCTuXM cqyuit kvHVCE kSnqYR fgiDpI eeAUEW ecjlX SeaTL gjJuRC iWYpgm iHkzF ergVCo jbBqfU fIXfpL "></i></a></div><footer class="eGElBa ftIldC eBrwtd iDuqPI kpaoc gCwvuy kooHYa eAOGpx dPAasc kKplrA jzScEz hMoAFf bccxkr cgjdEA "><div class="kQBRAp kroOag jZOgvY uUxpw "><div>Copyright © 2019 - <!-- -->2022<!-- --> <!-- --><a class="fyuAJJ jSOKOm cdhcuu kOZsAO " href="/">宝硕博客</a><span class="dot"></span><a class="fyuAJJ jSOKOm cdhcuu kOZsAO " href="https://beian.miit.gov.cn" target="_blank" rel="noopener noreferer nofollow">冀ICP备15024669号-3</a></div><div>Powered by<!-- --> <!-- --><a class="laXLGQ jSOKOm cdhcuu " href="https://nextjs.org" target="_blank" rel="noopener noreferer nofollow">Next.js</a> &amp; <!-- --><a class="laXLGQ jSOKOm cdhcuu " href="https://hexo.io" target="_blank" rel="noopener noreferer nofollow">Hexo</a><span class="dot"></span>Theme by<!-- --> <!-- --><a class="laXLGQ jSOKOm cdhcuu " href="https://baoshuo.ren" target="_blank">Baoshuo</a></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"title":"使用树莓派+Nginx搭建 Rtmp 直播服务 - 宝硕博客","post":{"title":"使用树莓派+Nginx搭建 Rtmp 直播服务","excerpt":"国庆在家闲着没啥事，把一直在角落里吃灰的树莓派 4B 拿出来捣鼓了几下。","content":[["$","p",{},["国庆在家闲着没啥事，把一直在角落里吃灰的树莓派 4B 拿出来捣鼓了几下。"]],["$","span",{"id":"more"},[]],["$","p",{},["使用 nginx 模块：",["$","a",{"href":"https://github.com/arut/nginx-rtmp-module","rel":"external nofollow noreferrer"},[["$","code",{},["nginx-rtmp-module"]]]]]],["$","h2",{"id":"安装-nginx-nginx-rtmp-module"},["安装 nginx \u0026 nginx-rtmp-module"]],["$","p",{},["apt, yes!"]],["$","pre",{},[["$","code",{"class":"hljs bash"},["apt update\napt upgrade -y\napt install nginx libnginx-mod-rtmp -y"]]]],["$","p",{},["访问服务器 IP ，出现如下图所示网页即代表安装成功。"]],["$","p",{},[["$","img",{"src":"https://s1.baoshuo.ren/2020/11/26/BdKOhDuxIaYks6q.png","alt":"","loading":"lazy"},[]]]],["$","h2",{"id":"修改-nginx-配置"},["修改 nginx 配置"]],["$","p",{},["打开 ",["$","code",{},["/etc/nginx/nginx.conf"]]," ，在末尾处插入下面的配置"]],["$","pre",{},[["$","code",{"class":"hljs nginx"},[["$","span",{"class":"hljs-section"},["rtmp"]]," {\n    ",["$","span",{"class":"hljs-section"},["server"]]," {\n        ",["$","span",{"class":"hljs-attribute"},["listen"]],"     ",["$","span",{"class":"hljs-number"},["1935"]],";              ",["$","span",{"class":"hljs-comment"},["# 服务端口"]],"\n        ",["$","span",{"class":"hljs-attribute"},["chunk_size"]]," ",["$","span",{"class":"hljs-number"},["4096"]],";              ",["$","span",{"class":"hljs-comment"},["# 数据传输块的大小"]],"\n\n        ",["$","span",{"class":"hljs-attribute"},["application"]]," vod {\n            ",["$","span",{"class":"hljs-attribute"},["play"]]," /opt/video;          ",["$","span",{"class":"hljs-comment"},["# 视频文件存放位置。"]],"\n        }\n\n        ",["$","span",{"class":"hljs-attribute"},["application"]]," rtmplive {\n            ",["$","span",{"class":"hljs-attribute"},["live"]],"            ",["$","span",{"class":"hljs-literal"},["on"]],";        ",["$","span",{"class":"hljs-comment"},["# 开启直播"]],"\n            ",["$","span",{"class":"hljs-attribute"},["max_connections"]]," ",["$","span",{"class":"hljs-number"},["64"]],";        ",["$","span",{"class":"hljs-comment"},["# 为 rtmp 引擎设置最大连接数。默认为 off"]],"\n        }\n\n        ",["$","span",{"class":"hljs-attribute"},["application"]]," live {\n            ",["$","span",{"class":"hljs-attribute"},["live"]],"                ",["$","span",{"class":"hljs-literal"},["on"]],";              ",["$","span",{"class":"hljs-comment"},["# 开启直播"]],"\n            ",["$","span",{"class":"hljs-attribute"},["hls"]],"                 ",["$","span",{"class":"hljs-literal"},["on"]],";              ",["$","span",{"class":"hljs-comment"},["# 这个参数把直播服务器改造成实时回放服务器。"]],"\n            ",["$","span",{"class":"hljs-attribute"},["wait_key"]],"            ",["$","span",{"class":"hljs-literal"},["on"]],";              ",["$","span",{"class":"hljs-comment"},["# 对视频切片进行保护，这样就不会产生马赛克了。"]],"\n            ",["$","span",{"class":"hljs-attribute"},["hls_path"]],"            /opt/video/hls;  ",["$","span",{"class":"hljs-comment"},["# 切片视频文件存放位置。"]],"\n            ",["$","span",{"class":"hljs-attribute"},["hls_fragment"]],"        ",["$","span",{"class":"hljs-number"},["10s"]],";             ",["$","span",{"class":"hljs-comment"},["# 设置HLS片段长度。"]],"\n            ",["$","span",{"class":"hljs-attribute"},["hls_max_fragment"]],"    ",["$","span",{"class":"hljs-number"},["10s"]],";             ",["$","span",{"class":"hljs-comment"},["# 设置HLS片段最大长度。"]],"\n            ",["$","span",{"class":"hljs-attribute"},["hls_playlist_length"]]," ",["$","span",{"class":"hljs-number"},["30s"]],";             ",["$","span",{"class":"hljs-comment"},["# 设置HLS播放列表长度。"]],"\n            ",["$","span",{"class":"hljs-attribute"},["hls_continuous"]],"      ",["$","span",{"class":"hljs-literal"},["on"]],";              ",["$","span",{"class":"hljs-comment"},["# 连续模式。"]],"\n            ",["$","span",{"class":"hljs-attribute"},["hls_cleanup"]],"         ",["$","span",{"class":"hljs-literal"},["on"]],";              ",["$","span",{"class":"hljs-comment"},["# 对多余的切片进行删除。"]],"\n            ",["$","span",{"class":"hljs-attribute"},["hls_nested"]],"          ",["$","span",{"class":"hljs-literal"},["on"]],";              ",["$","span",{"class":"hljs-comment"},["# 嵌套模式。"]],"\n        }\n    }\n}"]]]],["$","p",{},["打开默认站点配置文件 ",["$","code",{},["/etc/nginx/sites-available/default"]]," ，在 ",["$","code",{},["server"]]," 部分的末尾添加以下内容"]],["$","pre",{},[["$","code",{"class":"hljs nginx"},[["$","span",{"class":"hljs-section"},["location"]]," /live {\n    ",["$","span",{"class":"hljs-section"},["types"]]," {\n        application/vnd.apple.",["$","span",{"class":"hljs-attribute"},["mpegurl"]]," m3u8;\n        video/",["$","span",{"class":"hljs-attribute"},["mp2t"]],"                    ts;\n    }\n\n    ",["$","span",{"class":"hljs-attribute"},["autoindex"]]," ",["$","span",{"class":"hljs-literal"},["on"]],";\n    ",["$","span",{"class":"hljs-attribute"},["alias"]],"     /opt/video/hls;\n\n    ",["$","span",{"class":"hljs-attribute"},["expires"]]," -",["$","span",{"class":"hljs-number"},["1"]],";\n\n    ",["$","span",{"class":"hljs-attribute"},["add_header"]]," ",["$","span",{"class":"hljs-string"},["'Cache-Control'"]],"                    ",["$","span",{"class":"hljs-string"},["'no-cache'"]],";\n    ",["$","span",{"class":"hljs-attribute"},["add_header"]]," ",["$","span",{"class":"hljs-string"},["'Access-Control-Allow-Origin'"]],"      ",["$","span",{"class":"hljs-string"},["'*'"]],";\n    ",["$","span",{"class":"hljs-attribute"},["add_header"]]," ",["$","span",{"class":"hljs-string"},["'Access-Control-Allow-Credentials'"]]," ",["$","span",{"class":"hljs-string"},["'true'"]],";\n    ",["$","span",{"class":"hljs-attribute"},["add_header"]]," ",["$","span",{"class":"hljs-string"},["'Access-Control-Allow-Methods'"]],"     ",["$","span",{"class":"hljs-string"},["'GET, POST, OPTIONS'"]],";\n    ",["$","span",{"class":"hljs-attribute"},["add_header"]]," ",["$","span",{"class":"hljs-string"},["'Access-Control-Allow-Headers'"]],"     ",["$","span",{"class":"hljs-string"},["'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type'"]],";\n}\n",["$","span",{"class":"hljs-section"},["location"]]," /stat {\n    ",["$","span",{"class":"hljs-attribute"},["rtmp_stat"]]," all;\n    ",["$","span",{"class":"hljs-comment"},["# rtmp_stat_stylesheet stat.xsl;"]],"\n}"]]]],["$","p",{},["插入完以后配置文件会变成下面的样子"]],["$","pre",{},[["$","code",{"class":"hljs diff"},[["$","span",{"class":"hljs-comment"},["--- /etc/nginx/sites-available/default"]],"\n",["$","span",{"class":"hljs-comment"},["+++ /etc/nginx/sites-available/default"]],"\n",["$","span",{"class":"hljs-meta"},["@@ -1,14 +1,36 @@"]],"\n server {\n     listen 80 default_server;\n     listen [::]:80 default_server;\n\n     root /var/www/html;\n\n     index index.html index.htm index.nginx-debian.html;\n\n     server_name _;\n\n     location / {\n         try_files $uri $uri/ =404;\n     }\n",["$","span",{"class":"hljs-addition"},["+"]],"\n",["$","span",{"class":"hljs-addition"},["+    location /live {"]],"\n",["$","span",{"class":"hljs-addition"},["+        types {"]],"\n",["$","span",{"class":"hljs-addition"},["+            application/vnd.apple.mpegurl m3u8;"]],"\n",["$","span",{"class":"hljs-addition"},["+            video/mp2t                    ts;"]],"\n",["$","span",{"class":"hljs-addition"},["+        }"]],"\n",["$","span",{"class":"hljs-addition"},["+"]],"\n",["$","span",{"class":"hljs-addition"},["+        autoindex on;"]],"\n",["$","span",{"class":"hljs-addition"},["+        alias     /opt/video/hls;"]],"\n",["$","span",{"class":"hljs-addition"},["+"]],"\n",["$","span",{"class":"hljs-addition"},["+        expires -1;"]],"\n",["$","span",{"class":"hljs-addition"},["+"]],"\n",["$","span",{"class":"hljs-addition"},["+        add_header 'Cache-Control'                    'no-cache';"]],"\n",["$","span",{"class":"hljs-addition"},["+        add_header 'Access-Control-Allow-Origin'      '*';"]],"\n",["$","span",{"class":"hljs-addition"},["+        add_header 'Access-Control-Allow-Credentials' 'true';"]],"\n",["$","span",{"class":"hljs-addition"},["+        add_header 'Access-Control-Allow-Methods'     'GET, POST, OPTIONS';"]],"\n",["$","span",{"class":"hljs-addition"},["+        add_header 'Access-Control-Allow-Headers'     'DNT,X-CustomHeader,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';"]],"\n",["$","span",{"class":"hljs-addition"},["+    }"]],"\n",["$","span",{"class":"hljs-addition"},["+    location /stat {"]],"\n",["$","span",{"class":"hljs-addition"},["+        rtmp_stat all;"]],"\n",["$","span",{"class":"hljs-addition"},["+        # rtmp_stat_stylesheet stat.xsl;"]],"\n",["$","span",{"class":"hljs-addition"},["+    }"]],"\n }"]]]],["$","p",{},["修改完成后使用 ",["$","code",{},["nginx -t"]]," 测试配置文件是否正确"]],["$","pre",{},[["$","code",{"class":"hljs vim"},["nginx: the configuration ",["$","span",{"class":"hljs-keyword"},["file"]]," /etc/nginx/nginx.",["$","span",{"class":"hljs-keyword"},["conf"]]," ",["$","span",{"class":"hljs-keyword"},["syntax"]]," ",["$","span",{"class":"hljs-keyword"},["is"]]," ok\nnginx: configuration ",["$","span",{"class":"hljs-keyword"},["file"]]," /etc/nginx/nginx.",["$","span",{"class":"hljs-keyword"},["conf"]]," test ",["$","span",{"class":"hljs-keyword"},["is"]]," successful"]]]],["$","p",{},["当出现成功提示时，使用 ",["$","code",{},["nginx -s reload"]]," 平滑重启 nginx。"]],["$","p",{},["重启成功后使用 ",["$","code",{},["netstat -lnp"]]," 查看 ",["$","code",{},["tcp/1935"]]," 端口是否开启。"]],["$","p",{},[["$","img",{"src":"https://s1.baoshuo.ren/2020/11/26/Xy3Nq5WZaogLIvR.png","alt":"","loading":"lazy"},[]]]],["$","h2",{"id":"使用-obs-连接直播服务器"},["使用 OBS 连接直播服务器"]],["$","p",{},["打开 OBS ，在 设置 -\u003e 推流 中配置以下内容"]],["$","table",{},[["$","thead",{},[["$","tr",{},[["$","th",{},["项目"]],["$","th",{},["值"]]]]]],["$","tbody",{},[["$","tr",{},[["$","td",{},["服务"]],["$","td",{},[["$","code",{},["自定义..."]]]]]],["$","tr",{},[["$","td",{},["服务器"]],["$","td",{},[["$","code",{},["rtmp://${ip}/live"]]]]]],["$","tr",{},[["$","td",{},["串流密钥"]],["$","td",{},[["$","code",{},["${key}"]]]]]]]]]],["$","p",{},["其中，",["$","code",{},["${ip}"]]," 和 ",["$","code",{},["${key}"]]," 设置为你需要的值即可。"]],["$","p",{},["回到主界面，点击 ",["$","strong",{},["开始推流"]]," 进行推流。"]],["$","h2",{"id":"使用客户端拉取直播流"},["使用客户端拉取直播流"]],["$","p",{},[["$","img",{"src":"https://s1.baoshuo.ren/2020/11/26/jpqVTAgXSW6oyEP.png","alt":"","loading":"lazy"},[]]]],["$","p",{},["在 ",["$","code",{},["PotPlayer"]]," ",["$","code",{},["QQ影音"]]," 等播放器中选择 ",["$","code",{},["打开-\u003e打开URL"]]," 。"]],["$","p",{},[["$","img",{"src":"https://s1.baoshuo.ren/2020/11/26/rzBNukVTntf5xUR.png","alt":"","loading":"lazy"},[]]]],["$","p",{},["输入 ",["$","code",{},["http://${ip}/live/${key}/index.m3u8"]]," ，点击确定。"]],["$","p",{},[["$","img",{"src":"https://s1.baoshuo.ren/2020/11/26/crbEBQNC3qH8uOl.jpg","alt":"","loading":"lazy"},[]]]],["$","p",{},["此时可以就看到直播画面了。"]],["$","h2",{"id":"网页端播放"},["网页端播放"]],["$","p",{},["页面中只有一个播放器，其他功能请自行实现。"]],["$","pre",{},[["$","code",{"class":"hljs xml"},[["$","span",{"class":"hljs-tag"},["\u003c",["$","span",{"class":"hljs-name"},["html"]],"\u003e"]],"\n\n",["$","span",{"class":"hljs-tag"},["\u003c",["$","span",{"class":"hljs-name"},["head"]],"\u003e"]],"\n    ",["$","span",{"class":"hljs-tag"},["\u003c",["$","span",{"class":"hljs-name"},["title"]],"\u003e"]],"Live Player",["$","span",{"class":"hljs-tag"},["\u003c/",["$","span",{"class":"hljs-name"},["title"]],"\u003e"]],"\n    ",["$","span",{"class":"hljs-tag"},["\u003c",["$","span",{"class":"hljs-name"},["meta"]]," ",["$","span",{"class":"hljs-attr"},["charset"]],"=",["$","span",{"class":"hljs-string"},["\"UTF-8\""]],"\u003e"]],"\n",["$","span",{"class":"hljs-tag"},["\u003c/",["$","span",{"class":"hljs-name"},["head"]],"\u003e"]],"\n\n",["$","span",{"class":"hljs-tag"},["\u003c",["$","span",{"class":"hljs-name"},["body"]],"\u003e"]],"\n    ",["$","span",{"class":"hljs-tag"},["\u003c",["$","span",{"class":"hljs-name"},["div"]]," ",["$","span",{"class":"hljs-attr"},["id"]],"=",["$","span",{"class":"hljs-string"},["\"dplayer\""]],"\u003e"]],["$","span",{"class":"hljs-tag"},["\u003c/",["$","span",{"class":"hljs-name"},["div"]],"\u003e"]],"\n    ",["$","span",{"class":"hljs-tag"},["\u003c",["$","span",{"class":"hljs-name"},["script"]]," ",["$","span",{"class":"hljs-attr"},["src"]],"=",["$","span",{"class":"hljs-string"},["\"https://cdn.jsdelivr.net/npm/hls.js@0.14.13/dist/hls.min.js\""]],"\u003e"]],["$","span",{"class":"hljs-tag"},["\u003c/",["$","span",{"class":"hljs-name"},["script"]],"\u003e"]],"\n    ",["$","span",{"class":"hljs-tag"},["\u003c",["$","span",{"class":"hljs-name"},["script"]]," ",["$","span",{"class":"hljs-attr"},["src"]],"=",["$","span",{"class":"hljs-string"},["\"https://cdn.jsdelivr.net/npm/dplayer@1.26.0/dist/DPlayer.min.js\""]],"\u003e"]],["$","span",{"class":"hljs-tag"},["\u003c/",["$","span",{"class":"hljs-name"},["script"]],"\u003e"]],"\n    ",["$","span",{"class":"hljs-tag"},["\u003c",["$","span",{"class":"hljs-name"},["script"]],"\u003e"]],["$","span",{"class":"language-javascript"},[]],"\n",["$","span",{"class":"language-javascript"},["        ",["$","span",{"class":"hljs-keyword"},["const"]]," dp = ",["$","span",{"class":"hljs-keyword"},["new"]]," ",["$","span",{"class":"hljs-title class_"},["DPlayer"]],"({"]],"\n",["$","span",{"class":"language-javascript"},["            ",["$","span",{"class":"hljs-attr"},["container"]],": ",["$","span",{"class":"hljs-variable language_"},["document"]],".",["$","span",{"class":"hljs-title function_"},["getElementById"]],"(",["$","span",{"class":"hljs-string"},["'dplayer'"]],"),"]],"\n",["$","span",{"class":"language-javascript"},["            ",["$","span",{"class":"hljs-attr"},["live"]],": ",["$","span",{"class":"hljs-literal"},["true"]],","]],"\n",["$","span",{"class":"language-javascript"},["            ",["$","span",{"class":"hljs-attr"},["video"]],": {"]],"\n",["$","span",{"class":"language-javascript"},["                ",["$","span",{"class":"hljs-attr"},["url"]],": ",["$","span",{"class":"hljs-string"},["'http://${ip}/live/${key}/index.m3u8'"]],","]],"\n",["$","span",{"class":"language-javascript"},["                ",["$","span",{"class":"hljs-attr"},["type"]],": ",["$","span",{"class":"hljs-string"},["'hls'"]],","]],"\n",["$","span",{"class":"language-javascript"},["            },"]],"\n",["$","span",{"class":"language-javascript"},["        });"]],"\n",["$","span",{"class":"language-javascript"},["    "]],["$","span",{"class":"hljs-tag"},["\u003c/",["$","span",{"class":"hljs-name"},["script"]],"\u003e"]],"\n",["$","span",{"class":"hljs-tag"},["\u003c/",["$","span",{"class":"hljs-name"},["body"]],"\u003e"]],"\n\n",["$","span",{"class":"hljs-tag"},["\u003c/",["$","span",{"class":"hljs-name"},["html"]],"\u003e"]]]]]],["$","p",{},[["$","img",{"src":"https://s1.baoshuo.ren/2020/11/26/9X6mUtF4fLzdaYn.jpg","alt":"","loading":"lazy"},[]]]],["$","h2",{"id":"后记-5"},["后记"]],["$","p",{},["如果没有在外直播的需求，不要将 rtmp 端口映射至公网，这可能会带来一些不必要的麻烦。"]],["$","h2",{"id":"参考资料-11"},["参考资料"]],["$","ol",{},[["$","li",{},[["$","a",{"href":"https://github.com/arut/nginx-rtmp-module","rel":"external nofollow noreferrer"},["NGINX-based Media Streaming Server"]]]]]]],"thumb":null,"date":"2020-10-05","updated":"2020-10-05","isoDate":"2020-10-05T13:35:32.000Z","isoUpdate":"2020-10-05T13:35:32.000Z","categories":[{"name":"技术向","url":"/categories/%E6%8A%80%E6%9C%AF%E5%90%91/"}],"tags":[{"name":"折腾","url":"/tags/%E6%8A%98%E8%85%BE/"}],"license":null,"permalink":"https://blog.baoshuo.ren/post/raspberry-pi-rtmp-live/","url":"/post/raspberry-pi-rtmp-live/","prev":{"title":"Bilibili 1024 节 CTF Write Up","url":"/post/bilibili-1024-ctf-write-up/"},"next":{"title":"给腾讯云服务器免费增加第二个 IP","url":"/post/tencent-cloud-cvm-dual-ip/"},"toc":{"0":{"text":"安装 nginx \u0026amp; nginx-rtmp-module","id":"安装-nginx-nginx-rtmp-module"},"1":{"text":"修改 nginx 配置","id":"修改-nginx-配置"},"2":{"text":"使用 OBS 连接直播服务器","id":"使用-obs-连接直播服务器"},"3":{"text":"使用客户端拉取直播流","id":"使用客户端拉取直播流"},"4":{"text":"网页端播放","id":"网页端播放"},"5":{"text":"后记","id":"后记-5"},"6":{"text":"参考资料","id":"参考资料-11"}},"hasToc":true,"comments":true,"wordCount":"992 字"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"raspberry-pi-rtmp-live"},"buildId":"cTEtOKXDdqaCcovD4CXGT","assetPrefix":"https://static.cdn.baoshuo.ren/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>