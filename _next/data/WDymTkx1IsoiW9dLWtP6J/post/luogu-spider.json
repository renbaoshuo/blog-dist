{"pageProps":{"title":"洛谷爬虫 - 宝硕博客","post":{"title":"洛谷爬虫","excerpt":"截至目前，洛谷已经有了近两万道题目和四十余万名用户。本代码爬取了一些样本，以供后续（可能）的数据分析。","content":[{"tag":"p","content":["截至目前，洛谷已经有了近两万道题目和四十余万名用户。本代码爬取了一些样本，以供后续（可能）的数据分析。"]},{"tag":"span","attrs":{"id":"more"},"content":[]},{"tag":"p","content":["本次爬取遵守洛谷的 ",{"tag":"code","content":["robots.txt"]}," 中的要求，不爬取提交记录页面。为了避免影响洛谷的正常运行，脚本只采用单线程进行爬取。"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs http"},"content":[{"tag":"span","attrs":{"class":"hljs-attribute"},"content":["User-Agent"]},{"tag":"span","attrs":{"class":"hljs-punctuation"},"content":[": "]},"*\n",{"tag":"span","attrs":{"class":"hljs-attribute"},"content":["Disallow"]},{"tag":"span","attrs":{"class":"hljs-punctuation"},"content":[": "]},"/record\n",{"tag":"span","attrs":{"class":"hljs-attribute"},"content":["Disallow"]},{"tag":"span","attrs":{"class":"hljs-punctuation"},"content":[": "]},"/recordnew"]}]},{"tag":"h2","attrs":{"id":"爬取题目信息"},"content":["爬取题目信息"]},{"tag":"h3","attrs":{"id":"题目数据获取"},"content":["题目数据获取"]},{"tag":"p","content":["先使用 ",{"tag":"code","content":["curl"]}," 获取洛谷的题目页面："]},{"tag":"p","content":[{"tag":"img","attrs":{"src":"https://s1.baoshuo.ren/2020/11/26/JageUdcpXTthIjM.png","alt":"","loading":"lazy"},"content":[]}]},{"tag":"p","content":["可以看出我们需要的数据都在传入给 ",{"tag":"code","content":["decodeURIComponent()"]}," 函数的字符串中，正则匹配取出即可。"]},{"tag":"p","content":["下面是代码实现："]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs python"},"content":[{"tag":"span","attrs":{"class":"hljs-comment"},"content":["#!/usr/bin/python3"]},"\n",{"tag":"span","attrs":{"class":"hljs-comment"},"content":["# coding: utf-8"]},"\n\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," requests\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," re\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," json\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["from"]}," urllib.parse ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," unquote\n\n",{"tag":"span","attrs":{"class":"hljs-comment"},"content":["# 设置请求头"]},"\nheaders = {\n    ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"User-Agent\""]},": ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 Spider/0.1\""]},"\n}\n\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["def"]}," ",{"tag":"span","attrs":{"class":"hljs-title function_"},"content":["getProblemJSON"]},"(",{"tag":"span","attrs":{"class":"hljs-params"},"content":["pid"]},"):\n    ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["return"]}," json.loads(unquote(",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["str"]},"(re.findall(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["r'decodeURIComponent\\(\"(.*)\"\\)'"]},", requests.get(url=",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"https://www.luogu.com.cn/problem/P1000\""]},", headers=headers).text)[",{"tag":"span","attrs":{"class":"hljs-number"},"content":["0"]},"])))\n\ndata = getProblemJSON(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"P1000\""]},")\n",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["print"]},"(json.dumps(data[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["'currentData'"]},"], sort_keys=",{"tag":"span","attrs":{"class":"hljs-literal"},"content":["True"]},", indent=",{"tag":"span","attrs":{"class":"hljs-number"},"content":["4"]},"))"]}]},{"tag":"p","content":["Update at 2021/02/05:"]},{"tag":"p","content":["添加参数 ",{"tag":"code","content":["_contentOnly=1"]}," 可以直接获取 JSON 格式的信息，无需再正则匹配。"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs diff"},"content":[{"tag":"span","attrs":{"class":"hljs-comment"},"content":["--- a/tools/spider.py"]},"\n",{"tag":"span","attrs":{"class":"hljs-comment"},"content":["+++ b/tools/spider.py"]},"\n",{"tag":"span","attrs":{"class":"hljs-meta"},"content":["@@ -19,8 +19,7 @@"]},"\n def getProblem(pid):\n",{"tag":"span","attrs":{"class":"hljs-deletion"},"content":["-    url = f\"https://www.luogu.com.cn/problem/{pid}\""]},"\n",{"tag":"span","attrs":{"class":"hljs-deletion"},"content":["-    redata = re.findall(r'decodeURIComponent\\(\"(.*)\"\\)',"]},"\n",{"tag":"span","attrs":{"class":"hljs-deletion"},"content":["-                        requests.get(url, headers=headers).text)"]},"\n",{"tag":"span","attrs":{"class":"hljs-addition"},"content":["+    url = f\"https://www.luogu.com.cn/problem/{pid}?_contentOnly=1\""]},"\n",{"tag":"span","attrs":{"class":"hljs-addition"},"content":["+    redata = requests.get(url, headers=headers).text"]},"\n     if len(redata) == 0:\n         return { \"code\": 403 }\n     else:\n",{"tag":"span","attrs":{"class":"hljs-deletion"},"content":["-        return json.loads(unquote(redata[0]))"]},"\n",{"tag":"span","attrs":{"class":"hljs-addition"},"content":["+        return json.loads(redata)"]}]}]},{"tag":"h3","attrs":{"id":"处理题目数据"},"content":["处理题目数据"]},{"tag":"p","content":["这里只留下 ",{"tag":"code","content":["currentData.problem"]}," 字段里面的内容即可。"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs python"},"content":[{"tag":"span","attrs":{"class":"hljs-comment"},"content":["#!/usr/bin/python3"]},"\n",{"tag":"span","attrs":{"class":"hljs-comment"},"content":["# coding: utf-8"]},"\n\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," requests\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," re\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," json\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["from"]}," urllib.parse ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," unquote\n\nf = ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["open"]},"(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["'problems.json'"]},", ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["'w'"]},")\nres = []\n\nheaders = {\n    ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"user-agent\""]},": ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4331.0 Safari/537.36 spider/0.1\""]},",\n}\n\n\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["def"]}," ",{"tag":"span","attrs":{"class":"hljs-title function_"},"content":["getProblem"]},"(",{"tag":"span","attrs":{"class":"hljs-params"},"content":["pid"]},"):\n    ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["return"]}," json.loads(requests.get(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"https://www.luogu.com.cn/problem/",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{pid}"]},"?_contentOnly=1\""]},", headers=headers).text)[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["'currentData'"]},"]\n\n\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["for"]}," i ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["in"]}," ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["range"]},"(",{"tag":"span","attrs":{"class":"hljs-number"},"content":["1000"]},", ",{"tag":"span","attrs":{"class":"hljs-number"},"content":["1010"]},"):\n    tmpdict = {}\n    tmpdict[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"pid\""]},"] = ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"P",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{i}"]},"\""]},"\n    tmpdict[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"data\""]},"] = getProblem(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"P",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{i}"]},"\""]},")[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"problem\""]},"]\n    res.append(tmpdict)\n\n",{"tag":"span","attrs":{"class":"hljs-comment"},"content":["# print(res)"]},"\nf.write(json.dumps(res, indent=",{"tag":"span","attrs":{"class":"hljs-number"},"content":["4"]},").replace(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"\\\\t\""]},", ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"    \""]},"))"]}]},{"tag":"h3","attrs":{"id":"最终代码"},"content":["最终代码"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs python"},"content":[{"tag":"span","attrs":{"class":"hljs-comment"},"content":["#!/usr/bin/python3"]},"\n",{"tag":"span","attrs":{"class":"hljs-comment"},"content":["# coding: utf-8"]},"\n\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," requests\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," json\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," time\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," pymongo\n\ndbclient = pymongo.MongoClient(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"mongodb://127.0.0.1:27017/\""]},")\nluogudb = dbclient[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"luogu\""]},"]\ndbcol = luogudb[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"problem\""]},"]\n\nheaders = {\n    ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"user-agent\""]},": ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4331.0 Safari/537.36 spider/0.1\""]},",\n}\n\n\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["def"]}," ",{"tag":"span","attrs":{"class":"hljs-title function_"},"content":["getProblem"]},"(",{"tag":"span","attrs":{"class":"hljs-params"},"content":["pid"]},"):\n    url = ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"https://www.luogu.com.cn/problem/",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{pid}"]},"?_contentOnly=1\""]},"\n    redata = requests.get(url, headers=headers).text\n    ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["return"]}," json.loads(redata)\n\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["for"]}," i ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["in"]}," ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["range"]},"(",{"tag":"span","attrs":{"class":"hljs-number"},"content":["1000"]},", ",{"tag":"span","attrs":{"class":"hljs-number"},"content":["7103"]},"):\n    pid = ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"P",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{i}"]},"\""]},"\n    ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["if"]}," ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["list"]},"(dbcol.find({",{"tag":"span","attrs":{"class":"hljs-string"},"content":["'pid'"]},": pid})) == []:\n        tmpdict = {}\n        tmpdict[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"pid\""]},"] = pid\n        tmpdata = getProblem(pid)\n        ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["if"]}," tmpdata[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"code\""]},"] == ",{"tag":"span","attrs":{"class":"hljs-number"},"content":["200"]},":\n            tmpdict[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"data\""]},"] = getProblem(pid)[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"currentData\""]},"][",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"problem\""]},"]\n            dbcol.insert_one(tmpdict)\n            ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["print"]},"(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"Successfully get problem ",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{pid}"]},".\""]},")\n            time.sleep(",{"tag":"span","attrs":{"class":"hljs-number"},"content":["1"]},")\n        ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["else"]},":\n            ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["print"]},"(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"Fail to get problem ",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{pid}"]},".\""]},")\n    ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["else"]},":\n        ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["print"]},"(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"Problem ",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{pid}"]}," is already exists.\""]},")"]}]},{"tag":"p","content":["有关于数据库读写的部分请参考下文的 ",{"tag":"a","attrs":{"href":"#%E6%95%B0%E6%8D%AE%E5%BA%93"},"content":["数据库"]}," 部分。"]},{"tag":"h2","attrs":{"id":"爬取用户信息"},"content":["爬取用户信息"]},{"tag":"p","content":["结构与题目爬虫类似，故不再作代码说明。"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs python"},"content":[{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," json\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," time\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," pymongo\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["import"]}," requests\n\ndbclient = pymongo.MongoClient(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"mongodb://127.0.0.1:27017/\""]},")\nluogudb = dbclient[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"luogu\""]},"]\ndbcol = luogudb[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"user\""]},"]\n\nheaders = { ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"User-Agent\""]},": ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4331.0 Safari/537.36\""]},", }\n\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["def"]}," ",{"tag":"span","attrs":{"class":"hljs-title function_"},"content":["getUser"]},"(",{"tag":"span","attrs":{"class":"hljs-params"},"content":["uid"]},"):\n    url = ",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"https://www.luogu.com.cn/user/",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{uid}"]},"?_contentOnly=1\""]},"\n    redata = requests.get(url, headers=headers).text\n    ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["return"]}," json.loads(redata)\n\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["for"]}," uid ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["in"]}," ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["range"]},"(",{"tag":"span","attrs":{"class":"hljs-number"},"content":["1"]},", ",{"tag":"span","attrs":{"class":"hljs-number"},"content":["2"]},"):\n    ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["if"]}," ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["list"]},"(dbcol.find({",{"tag":"span","attrs":{"class":"hljs-string"},"content":["'uid'"]},": uid})) == []:\n        tmpdict = {}\n        tmpdict[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"_id\""]},"] = uid\n        tmpdict[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"uid\""]},"] = uid\n        tmpdata = getUser(uid)\n        ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["if"]}," tmpdata[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"code\""]},"] == ",{"tag":"span","attrs":{"class":"hljs-number"},"content":["200"]},":\n            tmpdict[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"data\""]},"] = tmpdata[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"currentData\""]},"][",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"user\""]},"]\n            dbcol.insert_one(tmpdict)\n            ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["print"]},"(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"Successfully get user ",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{uid}"]},".\""]},")\n            time.sleep(",{"tag":"span","attrs":{"class":"hljs-number"},"content":["0.5"]},")\n        ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["else"]},":\n            ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["print"]},"(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"Fail to get user ",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{uid}"]},".\""]},")\n            time.sleep(",{"tag":"span","attrs":{"class":"hljs-number"},"content":["0.5"]},")\n    ",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["else"]},":\n        ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["print"]},"(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["f\"User ",{"tag":"span","attrs":{"class":"hljs-subst"},"content":["{uid}"]}," is already exists.\""]},")"]}]},{"tag":"h2","attrs":{"id":"数据库"},"content":["数据库"]},{"tag":"h3","attrs":{"id":"搭建数据库"},"content":["搭建数据库"]},{"tag":"p","content":["搭建 MongoDB 数据库只需要在 docker 里面跑一个容器，非常简便。"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs bash"},"content":["docker run -v /root/data/mongo:/data/db -itd --name mongo -p 27017:27017 mongo"]}]},{"tag":"h3","attrs":{"id":"连接数据库"},"content":["连接数据库"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs python"},"content":["client = pymongo.MongoClient(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"mongodb://127.0.0.1:27017/\""]},")\nluogudb = dbclient[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"luogu\""]},"]\ncol = luogudb[",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"problem\""]},"]"]}]},{"tag":"h3","attrs":{"id":"存储数据"},"content":["存储数据"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs python"},"content":[{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["if"]}," ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["list"]},"(col.find({",{"tag":"span","attrs":{"class":"hljs-string"},"content":["'pid'"]}," : pid})) == []:\n    col.insert_one(data)\n    ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["print"]},"(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"Success.\""]},")\n",{"tag":"span","attrs":{"class":"hljs-keyword"},"content":["else"]},":\n    ",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["print"]},"(",{"tag":"span","attrs":{"class":"hljs-string"},"content":["\"Already exists.\""]},")"]}]},{"tag":"h3","attrs":{"id":"读取数据"},"content":["读取数据"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs python"},"content":[{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["print"]},"(",{"tag":"span","attrs":{"class":"hljs-built_in"},"content":["list"]},"(col.find()))"]}]},{"tag":"h2","attrs":{"id":"web-管理数据库"},"content":["web 管理数据库"]},{"tag":"p","content":["再跑一个 ",{"tag":"code","content":["mongo-express"]}," 就行了。"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs bash"},"content":["docker run -d --name mongo-express -e ME_CONFIG_MONGODB_SERVER=host.docker.internal -p 8081:8081 mongo-express"]}]},{"tag":"p","content":["访问 ",{"tag":"code","content":["ip:8081"]}," 就能看到管理界面了。"]},{"tag":"h2","attrs":{"id":"导出数据库"},"content":["导出数据库"]},{"tag":"p","content":["直接运行下方命令导出为 JSON 格式即可。"]},{"tag":"pre","content":[{"tag":"code","attrs":{"class":"hljs bash"},"content":["mongoexport -d luogu -c problem -o /data/db/problem.json"]}]},{"tag":"p","content":["或者点击对应数据库管理界面中的 ",{"tag":"code","content":["[JSON]"]}," 按钮导出。"]},{"tag":"p","content":[{"tag":"img","attrs":{"src":"https://s1.baoshuo.ren/2020/11/26/hXtVAynYGcb8B71.png","alt":"","loading":"lazy"},"content":[]}]},{"tag":"h2","attrs":{"id":"成果-2"},"content":["成果"]},{"tag":"p","content":["断断续续爬了一个多星期，终于爬完了。"]},{"tag":"p","content":[{"tag":"img","attrs":{"src":"https://s1.baoshuo.ren/2020/11/26/7muojQZM125gWXL.png","alt":"","loading":"lazy"},"content":[]}]}],"thumb":null,"date":"2020-11-26","updated":"2020-11-26","isoDate":"2020-11-26T06:55:02.000Z","isoUpdate":"2020-11-26T06:55:02.000Z","categories":[{"name":"技术向","url":"/categories/%E6%8A%80%E6%9C%AF%E5%90%91/"}],"tags":[],"license":null,"permalink":"https://blog.baoshuo.ren/post/luogu-spider/","url":"/post/luogu-spider/","prev":{"title":"【随笔】下载自己在 SM.MS 图床上的所有图片","url":"/post/download-smms-image/"},"next":{"title":"批量修改 Git 仓库的提交邮箱","url":"/post/change-git-submission-email/"},"toc":{"1":{"1":{"text":"题目数据获取","id":"题目数据获取"},"2":{"text":"处理题目数据","id":"处理题目数据"},"3":{"text":"最终代码","id":"最终代码"},"text":"爬取题目信息","id":"爬取题目信息"},"2":{"text":"爬取用户信息","id":"爬取用户信息"},"3":{"1":{"text":"搭建数据库","id":"搭建数据库"},"2":{"text":"连接数据库","id":"连接数据库"},"3":{"text":"存储数据","id":"存储数据"},"4":{"text":"读取数据","id":"读取数据"},"text":"数据库","id":"数据库"},"4":{"text":"web 管理数据库","id":"web-管理数据库"},"5":{"text":"导出数据库","id":"导出数据库"},"6":{"text":"成果","id":"成果-2"}},"hasToc":true,"comments":true,"wordCount":"约 1.2 千字"},"__post":true},"__N_SSG":true}