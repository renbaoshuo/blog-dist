{"pageProps":{"title":"年轻人的第一个 ASN - 宝硕博客","post":{"title":"年轻人的第一个 ASN","excerpt":"很久之前就有了这样的一个想法：拥有一个自己的 ASN 。2021 年的寒假末尾，我终于找到了一个肯给我这个未成年人申请 ASN 的 LIR 。","content":"<p>很久之前就有了这样的一个想法：拥有一个自己的 ASN 。2021 年的寒假末尾，我终于找到了一个肯给我这个未成年人申请 ASN 的 LIR 。</p>\n<span id=\"more\"></span>\n<p>于是这个世界上又多了一个祸害公网的人。</p>\n<p><strong>2021-12-09 更新</strong>：将 IP 广播部分直接链接到《<a href=\"/post/dn42-network\">初探 DN42 网络</a>》中的「DN42 BIRD2 使用入门」一节，以及一些不大不小的修改。</p>\n<h2 id=\"注册-asn-t2\"><a class=\"anchor\" href=\"#注册-asn-t2\"></a>注册 ASN</h2>\n<p>我找了某个 LIR 注册的 APNIC 的 ASN ，下号用时 3 个工作日。</p>\n<p>需要提供的信息有这些（带有 <code>[保密]</code> 标签的是非公开信息，只有你的 LIR 和 APINC 会知道）：</p>\n<ol>\n<li>[保密] 身份证明材料</li>\n<li>主标识</li>\n<li>联系人邮箱</li>\n<li>noc 邮箱</li>\n<li>abuse 邮箱</li>\n<li>国家</li>\n<li>联系人地址</li>\n<li>联系人姓名</li>\n<li>联系人电话</li>\n<li>ASN 的标识</li>\n<li>ASN 的全名</li>\n<li>ASN 所属国家</li>\n<li>[保密] 两个上游 ASN</li>\n<li>[保密] ASN 将要部署在的物理位置</li>\n</ol>\n<p>然后等了 3 个工作日，我的 ASN 申请终于通过审核并下号了。</p>\n<p>需要注意的是 APNIC 每半年会向联系人邮箱发送一封验证邮件，所以邮箱需要保持畅通，并且及时查看新邮件。</p>\n<h2 id=\"申请-vultr-的-bgp-广播功能\"><a class=\"anchor\" href=\"#申请-vultr-的-bgp-广播功能\"></a>申请 Vultr 的 BGP 广播功能</h2>\n<p>Vultr 的 BGP 广播功能可以称得上是「新手友好」的了。Vultr 良好的过滤系统保证了一般情况下即使发送了错误的路由表也不会漏到公网去，不怕搞炸，方便学习时使用。</p>\n<p>点击 <a href=\"https://my.vultr.com/bgp/\">https://my.vultr.com/bgp/</a> 进入 Vultr BGP 广播功能的开通页面。</p>\n<p><img src=\"https://s1.baoshuo.ren/2021/03/12/aYNdpciAb217wuP.png\" alt=\"\" loading=\"lazy\"></p>\n<p>点击页面中的 <strong>Get Started</strong> 进入 BGP 开通申请页面。</p>\n<p><img src=\"https://s1.baoshuo.ren/2021/03/12/Sb6AoPXTuJ3YIKn.png\" alt=\"\" loading=\"lazy\"></p>\n<ol>\n<li>将 <strong>I have my own IP space</strong> 和 <strong>I have my own ASN</strong> 设置为 YES 。</li>\n<li>在 <strong>My ASN</strong> 处填写 ASN （不含 <code>AS</code> 前缀）。</li>\n<li>在 <strong>BGP Password</strong> 处填写你想要的 BGP 密码。</li>\n<li>在 <strong>IP Prefixes</strong> 处填写你的 IP 前缀（CIDR 格式）。</li>\n<li><strong>Routes we shoule send you</strong> 选择 <strong>Full Table</strong> 。</li>\n<li>LOA 按照下方提供的模板照抄即可。</li>\n</ol>\n<p>然后点击 <strong>Setup</strong> 即可。</p>\n<details>\n<summary>LOA 模板</summary>\n<p>这是一篇 LOA 模板，照抄即可。</p>\n<pre><code class=\"hljs text\">AUTHORIZATION LETTER\n\n[日期, 如 Feb 27, 2021]\n\nTo whom it may concern,\n\nThis letter serves as authorization for [服务商公司名, 如 Vultr] with [ASN, 如 AS2333] to announce the following IP address blocks:\n\n[IP SPACE / ASN / SUBNET]\n[IP SPACE / ASN / SUBNET]\n[...]\n\nAs a representative of the company [公司名称] that is the owner of the subnet and/or ASN, I hereby declare that I&#x27;m authorized to represent and sign for this LOA.\n\nShould you have questions about this request, email me at [邮箱], or call: [电话号码]\n\nFrom,\n\n[姓名]\n[公司名称]\n[职位, 如 Network Administrator]\n[电话号码]</code></pre>\n</details>\n<p><img src=\"https://s1.baoshuo.ren/2021/03/13/nbQxcZLFNV6KBgP.png\" alt=\"\" loading=\"lazy\"></p>\n<p>提交完毕之后会出现如图所示的界面，点击 <strong>Start</strong> 即可开始验证进程。</p>\n<p><img src=\"https://s1.baoshuo.ren/2021/03/13/6QKhFL4PGxoeEXn.png\" alt=\"\" loading=\"lazy\"></p>\n<p>以 AS141776 的验证为例，选择好接收验证邮件的邮箱，然后点击 <strong>Send</strong> 即可。</p>\n<p><img src=\"https://s1.baoshuo.ren/2021/03/13/rE4txqgBLeZK9Ou.png\" alt=\"\" loading=\"lazy\"></p>\n<p><img src=\"https://s1.baoshuo.ren/2021/03/13/rAOSIP5oezGRqpc.png\" alt=\"\" loading=\"lazy\"></p>\n<p>点击邮箱里的链接即可（第一个是允许，第二个是拒绝）</p>\n<p><img src=\"https://s1.baoshuo.ren/2021/03/13/xBXiqmukOQbZT6r.png\" alt=\"\" loading=\"lazy\"></p>\n<p>验证成功后的提示。</p>\n<p>之后等待客服开通即可。</p>\n<p>由于我是在晚上申请的 Vultr BGP 服务，所以几分钟就开通好了。</p>\n<p><img src=\"https://s1.baoshuo.ren/2021/03/13/2aLwgPWHzlxF9DY.png\" alt=\"\" loading=\"lazy\"></p>\n<p>之后不要忘记去控制台重启实例哦~</p>\n<h2 id=\"使用-bird2-广播-ip\"><a class=\"anchor\" href=\"#使用-bird2-广播-ip\"></a>使用 BIRD2 广播 IP</h2>\n<p>可以参考我在 <a href=\"/post/dn42-network/#dn42-bird2-%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8\">初探 DN42 网络</a> 这篇文章的「DN42 BIRD2 使用入门」一节中描述的步骤，此处不再赘述。</p>\n<p>如果不会写配置文件可以参考 <a href=\"https://github.com/renbaoshuo/network-configs\">renbaoshuo/network-configs</a> 仓库中的配置。</p>\n<h2 id=\"一些注意事项\"><a class=\"anchor\" href=\"#一些注意事项\"></a>一些注意事项</h2>\n<h3 id=\"拆分-ip-段\"><a class=\"anchor\" href=\"#拆分-ip-段\"></a>拆分 IP 段</h3>\n<p>由于我一下子用不了那么多 IP ，所以我决定把我的 <code>/44</code> 拆分成几个 <code>/48</code> 来用。</p>\n<p>如果不涉及 whois 信息的修改操作，那么只需要修改一下 bird 的配置分开广播即可。</p>\n<p>APNIC 修改 whois 信息的流程可以参考 <a href=\"https://www.apnic.net/manage-ip/using-whois/updating-whois/objects/email-updates/\">Sending updates by email - APNIC</a> 页面上的指引发送邮件。</p>\n<h3 id=\"网络交换中心（internet-exchange）\"><a class=\"anchor\" href=\"#网络交换中心（internet-exchange）\"></a>网络交换中心（Internet Exchange）</h3>\n<p>加 IX 的操作流程和 Peer 差不多，注意只发送自己和自己下游（如果有）的路由，不能把上游发来的路由也塞进去，否则会被断开连接。</p>\n<h2 id=\"名词释义\"><a class=\"anchor\" href=\"#名词释义\"></a>名词释义</h2>\n<ul>\n<li>LIR: 本地互联网注册机构</li>\n<li>RIR: 区域互联网注册机构 （<a href=\"https://zh.wikipedia.org/zh-cn/%E5%8C%BA%E5%9F%9F%E4%BA%92%E8%81%94%E7%BD%91%E6%B3%A8%E5%86%8C%E7%AE%A1%E7%90%86%E6%9C%BA%E6%9E%84\">维基百科</a>）</li>\n<li>ASN: 自治系统编号（<a href=\"https://zh.wikipedia.org/zh-cn/%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F\">维基百科</a>）</li>\n<li>BGP: 边界网关协议（<a href=\"https://zh.wikipedia.org/zh-cn/%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE\">维基百科</a>）</li>\n<li>BIRD: 一个功能齐全的动态 IP 路由守护程序（<a href=\"https://bird.network.cz\">官方网站</a>）</li>\n</ul>\n<h2 id=\"参考资料-t7\"><a class=\"anchor\" href=\"#参考资料-t7\"></a>参考资料</h2>\n<ol>\n<li><a href=\"https://www.vultr.com/docs/example-letter-of-authorization-for-bgp-announcements\">Example Letter of Authorization for BGP Announcements</a>，Vultr Docs。</li>\n<li><a href=\"https://blog.lsc.moe/post/12/\">IP 广播 : CentOS 7 使用 bird6 广播 IPv6</a>，LiCEO。</li>\n<li><a href=\"/post/dn42-network/\">初探 DN42 网络</a>，宝硕博客。</li>\n<li><a href=\"https://hex.moe/p/c5ad0614/\">年轻人的第一个私人BGP(一) - 注册一个ASN</a>，LovelyWei’s 废纸篓。</li>\n<li><a href=\"https://hex.moe/p/d6a20b99/\">年轻人的第一个私人BGP(二) - 广播你的IP</a>，LovelyWei’s 废纸篓。</li>\n</ol>\n","thumb":"https://s1.baoshuo.ren/2021/02/28/XMjiBGVdHmARW48.png","date":"2021-03-20","updated":"2022-01-28","isoDate":"2021-03-20T17:06:09.000Z","isoUpdate":"2022-01-28T10:44:33.000Z","categories":[{"name":"笔记本","url":"/categories/%E7%AC%94%E8%AE%B0%E6%9C%AC/"}],"tags":[{"name":"BGP","url":"/tags/BGP/"},{"name":"计算机网络","url":"/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}],"license":null,"permalink":"https://blog.baoshuo.ren/post/my-own-asn/","prev":{"title":"初探 DN42 网络","url":"/post/dn42-network/"},"next":{"title":"初识 Service Worker —— 使用 Workbox 快速开发 Service Worker","url":"/post/workbox-service-worker/"},"toc":{"1":{"text":"注册 ASN","id":"注册-asn-t2"},"2":{"text":"申请 Vultr 的 BGP 广播功能","id":"申请-vultr-的-bgp-广播功能"},"3":{"text":"使用 BIRD2 广播 IP","id":"使用-bird2-广播-ip"},"4":{"1":{"text":"拆分 IP 段","id":"拆分-ip-段"},"2":{"text":"网络交换中心（Internet Exchange）","id":"网络交换中心（internet-exchange）"},"text":"一些注意事项","id":"一些注意事项"},"5":{"text":"名词释义","id":"名词释义"},"6":{"text":"参考资料","id":"参考资料-t7"}},"hasToc":true,"comments":true},"__post":true},"__N_SSG":true}