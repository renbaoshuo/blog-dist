(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{2252:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(6299)}])},4732:function(e,t,r){"use strict";r.d(t,{i:function(){return s}});var n=r(7667);let s=e=>{let[t,r]=(0,n.useState)(null),[s,l]=(0,n.useState)(null),[a,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async()=>{try{i(!0);let t=await fetch(e);r(await t.json())}catch(n){l(n)}finally{i(!1)}})()},[e]),{data:t,error:s,loading:a}}},6299:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return T},default:function(){return X}});var n=r(5893),s=r(7667),l=r(7726),a=r(9008),i=r.n(a);let c=()=>(0,n.jsx)("div",{className:"bEvNbr gCwvuy WhAZY bLIxaN bOjOhu kLKrsq mJHir bsOvLZ "});var o=(0,s.memo)(c),u=r(4732);let h=e=>{var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","…":"&hellip;"};return e.replace(/[&<>"]/g,e=>t[e]||e)},d=e=>e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),m=(e,t)=>{let r=[],n=e.trim().split(/[\s\-]+/).map(h),s=n.map(e=>e.toLowerCase()),l=RegExp(n.map(d).join("|"),"gi");return t.forEach(e=>{if(!e.title||!e.content)return;let{title:t,content:a,tags:i,categories:c}=e,o=t.toLowerCase(),u=a.toLowerCase(),h=i&&i.map(e=>e.toLowerCase())||[],d=c&&c.map(e=>e.toLowerCase())||[],m=-1,f=-1,j=0,x=0,g=0;if(s.forEach(e=>{let t=o.indexOf(e),r=u.indexOf(e),n=h.indexOf(e),s=d.indexOf(e);if((t>=0||r>=0||n>=0||s>=0)&&j++,n>=0&&x++,s>=0&&g++,j>0){let l=u.lastIndexOf(e);r>=0&&(m=m<0?r:Math.min(m,r)),l>=0&&(f=f<0?l:Math.max(f,l))}}),j!==n.length&&j<2)return;let k,v,p=0,w,N=0;m>=0&&(p=Math.max(m-10,0)),f>=0&&(w=Math.min(f+10,a.length)),w-p<50&&(w=p+300),v=a.substring(p,w);let b=(e,t)=>{let r=0;return e=e.replace(l,e=>(N+=r>0?t*(1+r/10):1*t,r++,"<mark>"+e+"</mark>"))};k=b(t,4),v=b(v,1),N+=2*x+3*g,r.push({url:e.url,title:k,content:v,weight:N})}),r=r.sort((e,t)=>t.weight-e.weight)};var f=r(2246),j=r.n(f);let x=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("link",{rel:"prefetch",as:"fetch",href:"/search.json"})}),(0,n.jsxs)("div",{className:"biWxPv ",children:["这是 ",(0,n.jsx)("b",{children:j().title})," 的站内搜索引擎。"]}),(0,n.jsxs)("div",{children:["搜索多个关键词时请使用空格分隔，如「",(0,n.jsx)("a",{className:"iGBTeW jsvbrX ",onClick:()=>setInput("网页 深色模式"),children:"网页 深色模式"}),"」「",(0,n.jsx)("a",{className:"iGBTeW jsvbrX ",onClick:()=>setInput("年度总结"),children:"年度总结"}),"」。"]})]});var g=r(1664),k=r.n(g);let v=e=>{let{url:t,title:r,content:s}=e;return(0,n.jsxs)(k(),{href:t,prefetch:!1,className:"kQBRAp jTjNVR dOyeOy hNjeNG boZGCc eQmaZO gPFlkX dZrGlq jKHpbB fyuAJJ bbUXPo iDSZVr ",children:[(0,n.jsx)("b",{dangerouslySetInnerHTML:{__html:r}}),(0,n.jsx)("div",{className:"eha_dBf dUvWpK hRLVFh ",dangerouslySetInnerHTML:{__html:s}})]})};var p=(0,s.memo)(v);let w=()=>(0,n.jsx)("div",{className:"izykGz FwRrA jxwRa_D "});var N=(0,s.memo)(w);let b=e=>{let{result:t,input:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"ckwrlS ",children:["找到 ",t.length," 条关于「",r,"」的结果"]}),t.map(e=>{let{url:t,title:r,content:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{}),(0,n.jsx)(p,{url:t,title:r,content:s})]})})]})};var C=(0,s.memo)(b);let R=(0,l.Z)({main:{marginBottom:"1rem"},link:{color:"var(--c-a)",textDecoration:"none"}}),_=()=>(0,n.jsxs)("div",{className:R("main"),children:["出错了，请"," ",(0,n.jsx)("a",{className:R("link"),onClick:()=>location.reload(),children:"重试"}),"。"]}),S=e=>{let{query:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"biWxPv ",children:"未找到任何结果。"}),(0,n.jsxs)("div",{children:["你也可以前往"," ",(0,n.jsx)("a",{href:"https://www.google.com/search?q=".concat(encodeURIComponent(t)),target:"_blank",rel:"nofollow noopener noreferrer",children:"Google"})," ","或"," ",(0,n.jsx)("a",{href:"https://www.bing.com/search?q=".concat(encodeURIComponent(t)),target:"_blank",rel:"nofollow noopener noreferrer",children:"Bing"})," ","搜索「",(0,n.jsx)("a",{href:"https://www.google.com/search?q=".concat(encodeURIComponent(t)),target:"_blank",rel:"nofollow noopener noreferrer",children:t}),"」。"]})]})};var y=(0,s.memo)(S);let F=e=>{let{query:t,startClientSideSearch:r}=e,{data:l,loading:a,error:i}=(0,u.i)("/search.json"),c=(0,s.useMemo)(()=>l&&t&&r?m(t,l):null,[l,t,r]);return i?(0,n.jsx)(_,{}):l&&t?(null==c?void 0:c.length)?(0,n.jsx)(C,{result:c,input:t}):(0,n.jsx)(y,{query:t}):(0,n.jsx)(x,{})};var Z=(0,s.memo)(F),I=r(9028),E=r(3009),P=r(8237);let O={result:{lk:"cjScYX",kr:"icKiSN",ko:"eeREmo",kh:"fZMRmg",kn:"hRjOno"}};var T=!0;function X(e){let{title:t}=e,[r,a]=(0,s.useTransition)(),[c,u]=(0,s.useState)(""),[h,d]=(0,s.useState)(""),[m,f]=(0,s.useState)(!1),j=(0,s.useCallback)(e=>{u(e),a(()=>{d(e)})},[]),g=(0,s.useCallback)(e=>{j(e.target.value)},[j]);return(0,s.useEffect)(()=>{f(!0)},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:t}),(0,n.jsx)("meta",{property:"og:title",content:t},"og:title")]}),(0,n.jsxs)("div",{className:(0,l.Z)(I.n),children:[(0,n.jsxs)("header",{className:(0,l.Z)(P.I,E.F.header),children:[(0,n.jsx)("h1",{className:(0,l.Z)(E.F.title),children:"搜索"}),(0,n.jsx)("input",{type:"search",className:"dmKgnC gcnSZS dPFrWx hHZVWs cUXNmd cRUUAa dvPYPU izykGz ikqruN ctibpX kzDapR FwRrA cDIyHz hpBjJb ycSPk jitmsg hMptyD gBQJwd fVllCt dFcJIz kfEoCQ kkFQYt fdJDfg gPcjvg izxwhR cesIug bfNvcZ bKSrvF lmabRp cktKFs ewWTHg ",autoComplete:"off",autoFocus:!0,placeholder:"请输入关键字...",value:c,onChange:g})]}),(0,n.jsxs)("div",{className:(0,l.Z)(P.I,O.result),children:[r&&(0,n.jsx)(o,{}),m?(0,n.jsx)(Z,{query:h,startClientSideSearch:m}):(0,n.jsx)(x,{})]})]})]})}},8237:function(e,t,r){"use strict";r.d(t,{I:function(){return n},b:function(){return s}}),r(7726);let{card:n,pCard:s}={card:{"1x":"gCwvuy","5v":"kRQsoY","5x":"jBvrhX","3q":"dgtTIu","3o":"eXJtsk",k4:"dvivnl",k5:"llUCyD","6l":"dPAasc"},pCard:{"1x":"gCwvuy","5v":"kRQsoY","5x":"jBvrhX","3q":"dgtTIu","3o":"eXJtsk",k4:"dvivnl",k5:"llUCyD","6l":"dPAasc",kr:"icKiSN",ko:"bMSzLf",kh:"fZMRmg",kn:"iigETV"}}},9028:function(e,t,r){"use strict";r.d(t,{n:function(){return n}}),r(7726);let{container:n}={container:{ue:"ipEZTh",i6:"eRVtDl",g7:"cUXNmd",g4:"jdraHW",fu:"biWxPv",g3:"eqrBPF"}}},3009:function(e,t,r){"use strict";r.d(t,{F:function(){return n}}),r(7726);let{...n}={header:{fu:"biWxPv",kr:"icKiSN",ko:"eeREmo",kh:"fZMRmg",kn:"hRjOno"},title:{ba:"gifdxR",g7:"jTjNVR",g4:"iKck",fu:"hNjeNG",g3:"bmFLeF"}}}},function(e){e.O(0,[313,774,888,179],function(){return e(e.s=2252)}),_N_E=e.O()}]);