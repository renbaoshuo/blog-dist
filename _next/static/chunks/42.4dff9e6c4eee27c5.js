(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42],{1042:function(s){try{s.exports=function(s){((e,t,n,o,a)=>{function d(...s){return d=Object.assign||function(s){for(const e of arguments)for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t]);return s},d.apply(this,s)}const r=s=>t.getElementById(s),i=s=>{const e=r("dsqjs-msg");e&&(e.innerHTML=s)},c="click",l="disqus_thread",m="dsqjs_sort",q='target="_blank" rel="external nofollow noopener noreferrer"',u=`<footer><p class="dsqjs-footer">Powered by <a class="dsqjs-disqus-logo" href="https://disqus.com" ${q}></a>&nbsp;&amp;&nbsp;<a href="https://disqusjs.skk.moe" target="_blank">DisqusJS</a></p></footer>`,p='\u5982\u9700\u5b8c\u6574\u4f53\u9a8c\u8bf7\u9488\u5bf9 disq.us | disquscdn.com | disqus.com \u542f\u7528\u4ee3\u7406\u5e76 <a id="dsqjs-reload-disqus" class="dsqjs-msg-btn">\u5c1d\u8bd5\u5b8c\u6574 Disqus \u6a21\u5f0f</a> | <a id="dsqjs-force-disqus" class="dsqjs-msg-btn">\u5f3a\u5236\u5b8c\u6574 Disqus \u6a21\u5f0f</a>',h=s=>o(s,{method:"GET"}).then((s=>a.all([s.ok,s.status,s.json(),s.headers]))).then((([s,e,t,n])=>{if(s)return{ok:s,status:e,data:t,headers:n};throw new Error})).catch((s=>{throw s})),j=(s,e)=>{try{n.setItem(s,e)}catch(t){}},f=s=>{const e=s=>s<10?`0${s}`:s;return s=Date.parse(new Date(s)),`${(s=new Date(s+288e5)).getFullYear()}-${e(s.getMonth()+1)}-${e(s.getDate())} ${e(s.getHours())}:${e(s.getMinutes())}`};function g(){if(e.DISQUS)e.DISQUS.reset({reload:!0,config(){this.page.identifier=T.config.identifier,this.page.url=T.config.url,this.page.title=T.config.title}});else{const s=t.createElement("script");r(l).innerHTML=`<div id="dsqjs"><section><div id="dsqjs-msg">\u8bc4\u8bba\u5b8c\u6574\u6a21\u5f0f\u52a0\u8f7d\u4e2d... \u5982\u679c\u957f\u65f6\u95f4\u65e0\u6cd5\u52a0\u8f7d\uff0c\u8bf7\u9488\u5bf9 disq.us | disquscdn.com | disqus.com \u542f\u7528\u4ee3\u7406\uff0c\u6216\u5207\u6362\u81f3 <a id="dsqjs-force-dsqjs" class="dsqjs-msg-btn">\u8bc4\u8bba\u57fa\u7840\u6a21\u5f0f</a></div></section>${u}</div>`,r("dsqjs-force-dsqjs").addEventListener(c,E),s.src=`https://${T.config.shortname}.disqus.com/embed.js`,s.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(s)}}function v(){r(l).innerHTML=`<div id="dsqjs"><section><div id="dsqjs-msg">\u6b63\u5728\u68c0\u67e5 Disqus \u80fd\u5426\u8bbf\u95ee...</div></section>${u}</div>`;const s=["disqus.com",`${T.config.shortname}.disqus.com`];let e=0,t=0;const n=()=>{s.length===e&&e===t?y():s.length===e&&E()},o=s=>{const o=new Image,a=setTimeout((()=>{o.onerror=o.onload=null,e++,n()}),3e3);o.onerror=()=>{clearTimeout(a),e++,n()},o.onload=()=>{clearTimeout(a),e++,t++,n()},o.src=`https://${s}/favicon.ico?${+new Date}=${+new Date}`};for(const a of s)o(a)}function $(){r("dsqjs-reload-disqus").addEventListener(c,v),r("dsqjs-force-disqus").addEventListener(c,y)}function b(){i(`\u8bc4\u8bba\u57fa\u7840\u6a21\u5f0f\u52a0\u8f7d\u4e2d... ${p}`),$();const s=`${T.config.api}3.0/threads/list.json?forum=${T.config.shortname}&thread=ident:${T.config.identifier}&api_key=${D()}`;h(s).then((({data:s})=>{if(0===s.code&&1===s.response.length){const{id:t,title:n,isClosed:o,posts:a}=s.response[0];T.page={id:t,title:n,isClosed:o,length:a,comment:[]},r(l).innerHTML=`<div id="dsqjs"><div id="dsqjs-msg">\u8bc4\u8bba\u57fa\u7840\u6a21\u5f0f\u52a0\u8f7d\u4e2d... ${p}</div>${((s,e)=>`<header class="dsqjs-header" id="dsqjs-header"><nav class="dsqjs-nav dsqjs-clearfix"><ul><li class="dsqjs-nav-tab dsqjs-tab-active"><span>${s} Comments</span></li><li class="dsqjs-nav-tab">${e}</li></ul><div class="dsqjs-order"><input class="dsqjs-order-radio" id="dsqjs-order-desc" type="radio" name="comment-order" value="desc" checked="true"><label class="dsqjs-order-label" for="dsqjs-order-desc" title="\u6309\u4ece\u65b0\u5230\u65e7">\u6700\u65b0</label><input class="dsqjs-order-radio" id="dsqjs-order-asc" type="radio" name="comment-order" value="asc"><label class="dsqjs-order-label" for="dsqjs-order-asc" title="\u6309\u4ece\u65e7\u5230\u65b0">\u6700\u65e9</label><input class="dsqjs-order-radio" id="dsqjs-order-popular" type="radio" name="comment-order" value="popular"><label class="dsqjs-order-label" for="dsqjs-order-popular" title="\u6309\u8bc4\u5206\u4ece\u9ad8\u5230\u4f4e">\u6700\u4f73</label></div></nav></header>`)(a,T.config.siteName)}<section class="dsqjs-post-container"><ul class="dsqjs-post-list" id="dsqjs-post-container"><p class="dsqjs-no-comment">\u8bc4\u8bba\u5217\u8868\u52a0\u8f7d\u4e2d...</p></ul><a id="dsqjs-load-more" class="dsqjs-load-more dsqjs-hide">\u52a0\u8f7d\u66f4\u591a\u8bc4\u8bba</a></section>${u}</div>`,$(),r(`dsqjs-order-${T.sortType}`).setAttribute("checked","true"),e()}else{if(0!==s.code||1===s.response.length)throw new Error;i('\u5f53\u524d Thread \u5c1a\u672a\u521b\u5efa\u3002\u662f\u5426\u5207\u6362\u81f3 <a id="dsqjs-force-disqus" class="dsqjs-msg-btn">\u5b8c\u6574 Disqus \u6a21\u5f0f</a>\uff1f'),r("dsqjs-force-disqus").addEventListener(c,y)}})).catch(L);const e=(s="")=>{const o=r("dsqjs-load-more"),a=t.getElementsByClassName("dsqjs-order-radio"),d=t.getElementsByClassName("dsqjs-has-more-btn"),l=()=>{for(const s of a)s.removeEventListener("change",u);o.removeEventListener(c,q);for(const s of d)s.removeEventListener(c,v)},q=()=>{l(),e(T.page.next)},u=({target:s})=>{T.sortType=s.getAttribute("value"),j(m,T.sortType),l(),T.page.comment=[],T.page.next="",r("dsqjs-post-container").innerHTML='<p class="dsqjs-no-comment">\u6b63\u5728\u5207\u6362\u6392\u5e8f\u65b9\u5f0f...</p>',o.classList.add("dsqjs-hide"),e()},f=""===s?"":`&cursor=${s}`;o.classList.add("dsqjs-disabled");const g=({createdAt:s})=>Date.parse(new Date(s)),b=(s,e)=>s.parent&&e.parent?g(s)-g(e):0,y=`${T.config.api}3.0/threads/listPostsThreaded?forum=${T.config.shortname}&thread=${T.page.id}${f}&api_key=${D()}&order=${T.sortType}`;h(y).then((({data:s})=>{if(0===s.code&&s.response.length>0){o.classList.remove("dsqjs-disabled"),T.page.comment.push(...s.response),T.page.comment.sort(b),n(T.page.comment);for(const s of a)s.addEventListener("change",u);for(const s of d)s.addEventListener(c,v);s.cursor.hasNext?(T.page.next=s.cursor.next,o.innerHTML="\u52a0\u8f7d\u66f4\u591a\u8bc4\u8bba",o.classList.remove("dsqjs-hide"),o.addEventListener(c,q)):o.classList.add("dsqjs-hide")}else{if(0!==s.code||0!==s.response.length)throw new Error;i(`\u4f60\u53ef\u80fd\u65e0\u6cd5\u8bbf\u95ee Disqus\uff0c\u5df2\u542f\u7528\u8bc4\u8bba\u57fa\u7840\u6a21\u5f0f\u3002${p}`),r("dsqjs-post-container").innerHTML=`<p class="dsqjs-no-comment" >${T.config.nocomment}</p>`,$(),r("dsqjs-force-disqus").addEventListener(c,E)}})).catch((()=>{""===s?L():(o.classList.remove("dsqjs-disabled"),o.innerHTML="\u52a0\u8f7d\u66f4\u591a\u8bc4\u8bba\u5931\u8d25\uff0c\u70b9\u51fb\u91cd\u8bd5",o.addEventListener(c,q))}))},n=s=>{const e=s=>(s.comment.author.profileUrl?(s.comment.avatarEl=`<a href="${s.comment.author.profileUrl}"><img src="${n(s.comment.author.avatar.cache)}" ${q}></a>`,s.comment.authorEl=`<span class="dsqjs-post-author"><a href="${s.comment.author.profileUrl}" ${q}>${s.comment.author.name}</a></span>`):(s.comment.avatarEl=`<img src="${n(s.comment.author.avatar.cache)}">`,s.comment.authorEl=`<span class="dsqjs-post-author">${s.comment.author.name}</span>`),T.config.adminLabel&&s.isPrimary&&(s.comment.authorEl+=`<span class="dsqjs-admin-badge">${T.config.adminLabel}</span>`),s),n=s=>s.replace("/a.disquscdn.com/ig","c.disquscdn.com"),o=s=>{let e="",o="";return s.isDeleted?o="<small>\u6b64\u8bc4\u8bba\u5df2\u88ab\u5220\u9664</small>":(e=`${s.authorEl}<span class="dsqjs-bullet"></span>`,o=(s=>{const e=t.createElement("div");e.innerHTML=s;const n=e.getElementsByTagName("a");for(const t of n){const s=decodeURIComponent(t.href.replace(/https:\/\/disq.us\/url\?url=/g,"")).replace(/(.*):.+cuid=.*/,"$1");t.href=s,t.innerHTML=s,t.rel="external noopener nofollow noreferrer",t.target="_blank"}return e.innerHTML})(n(s.message))),(({avatarEl:s,createdAt:e},t,n)=>`<div class="dsqjs-post-item dsqjs-clearfix"><div class="dsqjs-post-avatar">${s}</div><div class="dsqjs-post-body"><div class="dsqjs-post-header">${t}<span class="dsqjs-meta"><time>${f(e)}</time></span></div><div class="dsqjs-post-content">${n}</div></div></div>`)(s,e,o)},a=s=>{const t=s.nesting,n=s.children||[];if(!n)return;let d="";return d=t<T.config.nesting?'<ul class="dsqjs-post-list dsqjs-children">':'<ul class="dsqjs-post-list">',n.map((s=>{(s=e(s)).nesting=t+1;let n="";s.hasMore&&(n=`<p class="dsqjs-has-more">\u5207\u6362\u81f3 <a class="dsqjs-has-more-btn" id="load-more-${s.comment.id}" data-more-id="comment-${s.comment.id}">\u5b8c\u6574 Disqus \u6a21\u5f0f</a> \u663e\u793a\u66f4\u591a\u56de\u590d</p>`),d+=`<li data-id="comment-${s.comment.id}" id="comment-${s.comment.id}">${o(s.comment)}${a(s)}${n}</li>`})),d+="</ul>",0!==d.length?d:void 0};let d="";(s=>{let e=[],t=[],n=s=>({comment:s,author:s.author.name,isPrimary:!!T.config.admin&&s.author.username===T.config.admin,children:o(+s.id),hasMore:s.hasMore});const o=s=>{if(0===t.length)return null;const e=[];for(const o of t)o.parent===s&&e.unshift(n(o));return e.length?e:null};return s.forEach((s=>{(s.parent?t:e).push(s)})),e.map((s=>n(s)))})(s).map((s=>{s.children&&(s.nesting=1);let t="";(s=e(s)).hasMore&&(t=`<p class="dsqjs-has-more">\u5207\u6362\u81f3 <a id="load-more-${s.comment.id}">\u5b8c\u6574 Disqus \u6a21\u5f0f</a> \u663e\u793a\u66f4\u591a\u56de\u590d</p>`),d+=`<li data-id="comment-${s.comment.id}" id="comment-${s.comment.id}">${o(s.comment)}${a(s)}${t}</li>`})),i(`\u4f60\u53ef\u80fd\u65e0\u6cd5\u8bbf\u95ee Disqus\uff0c\u5df2\u542f\u7528\u8bc4\u8bba\u57fa\u7840\u6a21\u5f0f\u3002${p}`),r("dsqjs-post-container").innerHTML=d,$()}}function L(s){console.log(s),i('\u8bc4\u8bba\u57fa\u7840\u6a21\u5f0f\u52a0\u8f7d\u5931\u8d25\uff0c\u662f\u5426 <a id="dsqjs-reload-dsqjs" class="dsqjs-msg-btn">\u91cd\u8f7d</a> \u6216 <a id="dsqjs-reload-disqus" class="dsqjs-msg-btn">\u5c1d\u8bd5\u5b8c\u6574 Disqus \u6a21\u5f0f</a> \uff1f'),r("dsqjs-reload-dsqjs").addEventListener(c,b),r("dsqjs-reload-disqus").addEventListener(c,v)}function E(){j("dsqjs_mode","dsqjs"),b()}function y(){j("dsqjs_mode","disqus"),r(l).innerHTML="",g()}const T={},M=t.location.origin+t.location.pathname+t.location.search;T.config=d({api:"https://disqus.skk.moe/disqus/",identifier:M,url:M,title:t.title,siteName:"",nesting:parseInt(s.nesting)||4,nocomment:"\u8fd9\u91cc\u51b7\u51b7\u6e05\u6e05\u7684\uff0c\u4e00\u6761\u8bc4\u8bba\u90fd\u6ca1\u6709"},s),T.page={};const w=T.config.apikey,D=()=>Array.isArray(w)?w[Math.floor(Math.random()*w.length)]:w;e.disqus_config=function(){this.page.url=T.config.url,this.page.identifier=T.config.identifier,this.page.title=T.config.title},r(l).innerHTML=`<div id="dsqjs"><div id="dsqjs-msg"></div>${u}</div>`,o&&n&&a?(T.mode=n.getItem("dsqjs_mode"),T.sortType=n.getItem(m)||n.getItem("disqus.sort"),T.sortType||(j(m,"desc"),T.sortType="desc"),"disqus"===T.mode?(r(l).innerHTML="",g()):"dsqjs"===T.mode?b():v()):(i(`\u4f60\u7684\u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e\uff0c\u4e0d\u517c\u5bb9\u8bc4\u8bba\u57fa\u7840\u6a21\u5f0f\u3002${p}`),$())})(window,document,localStorage,fetch,Promise)}}catch(e){}}}]);